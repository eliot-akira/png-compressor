"use strict";(()=>{var mo=Object.create;var mn=Object.defineProperty;var To=Object.getOwnPropertyDescriptor;var Do=Object.getOwnPropertyNames;var Ao=Object.getPrototypeOf,So=Object.prototype.hasOwnProperty;var p=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),Uo=(e,n)=>{for(var t in n)mn(e,t,{get:n[t],enumerable:!0})},Po=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of Do(n))!So.call(e,a)&&a!==t&&mn(e,a,{get:()=>n[a],enumerable:!(r=To(n,a))||r.enumerable});return e};var Mo=(e,n,t)=>(t=e!=null?mo(Ao(e)):{},Po(n||!e||!e.__esModule?mn(t,"default",{value:e,enumerable:!0}):t,e));var U=p(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.handleWarning=P.DecodeWarning=P.createChunkDecodeWarning=P.DecodeError=P.createChunkDecodeError=P.assertChunkCompressionMethod=P.assertChunkMutualExclusion=P.assertChunkFollows=P.assertChunkPrecedes=P.assertChunkDataLengthGte=P.assertChunkDataLengthEquals=P.assertChunkSinglular=void 0;function Lo(e,n){e.parsedChunks.has(n.type)&&xe(e,Ee(n,`Multiple ${n.type} chunks not allowed`,n.offset+4))}P.assertChunkSinglular=Lo;function Io(e,n,t){if(n.dataLength!==t){let r=Ee(n,`Invalid data length: ${n.dataLength} !== ${t}`,n.offset);if(n.dataLength>t)xe(e,r);else throw r}}P.assertChunkDataLengthEquals=Io;function Ro(e,n,t){if(n.dataLength<t)throw Tn(e,n,`Invalid data length: ${n.dataLength} < ${t}`,n.offset)}P.assertChunkDataLengthGte=Ro;function zo(e,n,t){e.parsedChunks.has(t)&&xe(e,Ee(n,`Must precede ${t}`,n.offset+4))}P.assertChunkPrecedes=zo;function Oo(e,n,t){if(!e.parsedChunks.has(t))throw Tn(e,n,`Must follow ${t}`,n.offset+4)}P.assertChunkFollows=Oo;function Fo(e,n,t){e.parsedChunks.has(t)&&xe(e,Ee(n,`Should not be present alongside ${t}`,n.offset+4))}P.assertChunkMutualExclusion=Fo;function Bo(e,n,t,r){t!==0&&xe(e,Ee(n,`Unknown compression method "${t}"`,r))}P.assertChunkCompressionMethod=Bo;function Tn(e,n,t,r){return new ct(e,`${n.type}: ${t}`,r)}P.createChunkDecodeError=Tn;var ct=class extends Error{constructor(n,t,r){super(t),this.offset=r,this.partiallyDecodedImage={details:"header"in n&&n.header?{width:n.header.width,height:n.header.height,bitDepth:n.header.bitDepth,colorType:n.header.colorType,interlaceMethod:n.header.interlaceMethod}:void 0,info:n.info,metadata:n.metadata,rawChunks:n.rawChunks,warnings:n.warnings}}};P.DecodeError=ct;function Ee(e,n,t){return new ht(`${e.type}: ${n}`,t)}P.createChunkDecodeWarning=Ee;var ht=class extends Error{constructor(n,t){super(n),this.offset=t}};P.DecodeWarning=ht;function xe(e,n){if(e.options.strictMode)throw n;e.warnings.push(n)}P.handleWarning=xe});var dt=p(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.handleWarning=re.EncodeWarning=re.EncodeError=void 0;var Dn=class extends Error{constructor(n,t){super(n),this.offset=t}};re.EncodeError=Dn;var An=class extends Error{constructor(n,t){super(n),this.offset=t}};re.EncodeWarning=An;function No(e,n){if(e.options.strictMode)throw n;e.warnings.push(n)}re.handleWarning=No});var zr=p(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.convert16BitTo8BitData=void 0;function qo(e){let n=new Uint8Array(e.buffer),t=new Uint8Array(e.length);for(let r=0;r<t.length;r++)t[r]=n[r*2+1];return t}_t.convert16BitTo8BitData=qo});var ri=p((Ru,De)=>{"use strict";function Te(e){let n=e.length;for(;--n>=0;)e[n]=0}var jo=0,jr=1,Zo=2,$o=3,Ho=258,Rn=29,We=256,je=We+1+Rn,me=30,zn=19,Zr=2*je+1,pe=15,Sn=16,Wo=7,On=256,$r=16,Hr=17,Wr=18,Ln=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),wt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Go=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Gr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yo=512,ee=new Array((je+2)*2);Te(ee);var qe=new Array(me*2);Te(qe);var Ze=new Array(Yo);Te(Ze);var $e=new Array(Ho-$o+1);Te($e);var Fn=new Array(Rn);Te(Fn);var pt=new Array(me);Te(pt);function Un(e,n,t,r,a){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}var Yr,Xr,Vr;function Pn(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}var Kr=e=>e<256?Ze[e]:Ze[256+(e>>>7)],He=(e,n)=>{e.pending_buf[e.pending++]=n&255,e.pending_buf[e.pending++]=n>>>8&255},O=(e,n,t)=>{e.bi_valid>Sn-t?(e.bi_buf|=n<<e.bi_valid&65535,He(e,e.bi_buf),e.bi_buf=n>>Sn-e.bi_valid,e.bi_valid+=t-Sn):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},H=(e,n,t)=>{O(e,t[n*2],t[n*2+1])},Jr=(e,n)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--n>0);return t>>>1},Xo=e=>{e.bi_valid===16?(He(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Vo=(e,n)=>{let t=n.dyn_tree,r=n.max_code,a=n.stat_desc.static_tree,i=n.stat_desc.has_stree,o=n.stat_desc.extra_bits,s=n.stat_desc.extra_base,u=n.stat_desc.max_length,l,f,c,d,h,_,E=0;for(d=0;d<=pe;d++)e.bl_count[d]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Zr;l++)f=e.heap[l],d=t[t[f*2+1]*2+1]+1,d>u&&(d=u,E++),t[f*2+1]=d,!(f>r)&&(e.bl_count[d]++,h=0,f>=s&&(h=o[f-s]),_=t[f*2],e.opt_len+=_*(d+h),i&&(e.static_len+=_*(a[f*2+1]+h)));if(E!==0){do{for(d=u-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[u]--,E-=2}while(E>0);for(d=u;d!==0;d--)for(f=e.bl_count[d];f!==0;)c=e.heap[--l],!(c>r)&&(t[c*2+1]!==d&&(e.opt_len+=(d-t[c*2+1])*t[c*2],t[c*2+1]=d),f--)}},Qr=(e,n,t)=>{let r=new Array(pe+1),a=0,i,o;for(i=1;i<=pe;i++)a=a+t[i-1]<<1,r[i]=a;for(o=0;o<=n;o++){let s=e[o*2+1];s!==0&&(e[o*2]=Jr(r[s]++,s))}},Ko=()=>{let e,n,t,r,a,i=new Array(pe+1);for(t=0,r=0;r<Rn-1;r++)for(Fn[r]=t,e=0;e<1<<Ln[r];e++)$e[t++]=r;for($e[t-1]=r,a=0,r=0;r<16;r++)for(pt[r]=a,e=0;e<1<<wt[r];e++)Ze[a++]=r;for(a>>=7;r<me;r++)for(pt[r]=a<<7,e=0;e<1<<wt[r]-7;e++)Ze[256+a++]=r;for(n=0;n<=pe;n++)i[n]=0;for(e=0;e<=143;)ee[e*2+1]=8,e++,i[8]++;for(;e<=255;)ee[e*2+1]=9,e++,i[9]++;for(;e<=279;)ee[e*2+1]=7,e++,i[7]++;for(;e<=287;)ee[e*2+1]=8,e++,i[8]++;for(Qr(ee,je+1,i),e=0;e<me;e++)qe[e*2+1]=5,qe[e*2]=Jr(e,5);Yr=new Un(ee,Ln,We+1,je,pe),Xr=new Un(qe,wt,0,me,pe),Vr=new Un(new Array(0),Go,0,zn,Wo)},ei=e=>{let n;for(n=0;n<je;n++)e.dyn_ltree[n*2]=0;for(n=0;n<me;n++)e.dyn_dtree[n*2]=0;for(n=0;n<zn;n++)e.bl_tree[n*2]=0;e.dyn_ltree[On*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ti=e=>{e.bi_valid>8?He(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Or=(e,n,t,r)=>{let a=n*2,i=t*2;return e[a]<e[i]||e[a]===e[i]&&r[n]<=r[t]},Mn=(e,n,t)=>{let r=e.heap[t],a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Or(n,e.heap[a+1],e.heap[a],e.depth)&&a++,!Or(n,r,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=r},Fr=(e,n,t)=>{let r,a,i=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+i++]&255,r+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],r===0?H(e,a,n):(o=$e[a],H(e,o+We+1,n),s=Ln[o],s!==0&&(a-=Fn[o],O(e,a,s)),r--,o=Kr(r),H(e,o,t),s=wt[o],s!==0&&(r-=pt[o],O(e,r,s)));while(i<e.sym_next);H(e,On,n)},In=(e,n)=>{let t=n.dyn_tree,r=n.stat_desc.static_tree,a=n.stat_desc.has_stree,i=n.stat_desc.elems,o,s,u=-1,l;for(e.heap_len=0,e.heap_max=Zr,o=0;o<i;o++)t[o*2]!==0?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=r[l*2+1]);for(n.max_code=u,o=e.heap_len>>1;o>=1;o--)Mn(e,t,o);l=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Mn(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,t[l*2]=t[o*2]+t[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,t[o*2+1]=t[s*2+1]=l,e.heap[1]=l++,Mn(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Vo(e,n),Qr(t,u,e.bl_count)},Br=(e,n,t)=>{let r,a=-1,i,o=n[0*2+1],s=0,u=7,l=4;for(o===0&&(u=138,l=3),n[(t+1)*2+1]=65535,r=0;r<=t;r++)i=o,o=n[(r+1)*2+1],!(++s<u&&i===o)&&(s<l?e.bl_tree[i*2]+=s:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[$r*2]++):s<=10?e.bl_tree[Hr*2]++:e.bl_tree[Wr*2]++,s=0,a=i,o===0?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4))},Nr=(e,n,t)=>{let r,a=-1,i,o=n[0*2+1],s=0,u=7,l=4;for(o===0&&(u=138,l=3),r=0;r<=t;r++)if(i=o,o=n[(r+1)*2+1],!(++s<u&&i===o)){if(s<l)do H(e,i,e.bl_tree);while(--s!==0);else i!==0?(i!==a&&(H(e,i,e.bl_tree),s--),H(e,$r,e.bl_tree),O(e,s-3,2)):s<=10?(H(e,Hr,e.bl_tree),O(e,s-3,3)):(H(e,Wr,e.bl_tree),O(e,s-11,7));s=0,a=i,o===0?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4)}},Jo=e=>{let n;for(Br(e,e.dyn_ltree,e.l_desc.max_code),Br(e,e.dyn_dtree,e.d_desc.max_code),In(e,e.bl_desc),n=zn-1;n>=3&&e.bl_tree[Gr[n]*2+1]===0;n--);return e.opt_len+=3*(n+1)+5+5+4,n},Qo=(e,n,t,r)=>{let a;for(O(e,n-257,5),O(e,t-1,5),O(e,r-4,4),a=0;a<r;a++)O(e,e.bl_tree[Gr[a]*2+1],3);Nr(e,e.dyn_ltree,n-1),Nr(e,e.dyn_dtree,t-1)},es=e=>{let n=4093624447,t;for(t=0;t<=31;t++,n>>>=1)if(n&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<We;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},qr=!1,ts=e=>{qr||(Ko(),qr=!0),e.l_desc=new Pn(e.dyn_ltree,Yr),e.d_desc=new Pn(e.dyn_dtree,Xr),e.bl_desc=new Pn(e.bl_tree,Vr),e.bi_buf=0,e.bi_valid=0,ei(e)},ni=(e,n,t,r)=>{O(e,(jo<<1)+(r?1:0),3),ti(e),He(e,t),He(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t},ns=e=>{O(e,jr<<1,3),H(e,On,ee),Xo(e)},rs=(e,n,t,r)=>{let a,i,o=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=es(e)),In(e,e.l_desc),In(e,e.d_desc),o=Jo(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=t+5,t+4<=a&&n!==-1?ni(e,n,t,r):e.strategy===4||i===a?(O(e,(jr<<1)+(r?1:0),3),Fr(e,ee,qe)):(O(e,(Zo<<1)+(r?1:0),3),Qo(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Fr(e,e.dyn_ltree,e.dyn_dtree)),ei(e),r&&ti(e)},is=(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[t*2]++:(e.matches++,n--,e.dyn_ltree[($e[t]+We+1)*2]++,e.dyn_dtree[Kr(n)*2]++),e.sym_next===e.sym_end);De.exports._tr_init=ts;De.exports._tr_stored_block=ni;De.exports._tr_flush_block=rs;De.exports._tr_tally=is;De.exports._tr_align=ns});var Bn=p((zu,ii)=>{"use strict";var as=(e,n,t,r)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do a=a+n[r++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};ii.exports=as});var Nn=p((Ou,ai)=>{"use strict";var os=()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;n[t]=e}return n},ss=new Uint32Array(os()),ls=(e,n,t,r)=>{let a=ss,i=r+t;e^=-1;for(let o=r;o<i;o++)e=e>>>8^a[(e^n[o])&255];return e^-1};ai.exports=ls});var gt=p((Fu,oi)=>{"use strict";oi.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var ie=p((Bu,si)=>{"use strict";si.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var gi=p((Nu,X)=>{"use strict";var{_tr_init:fs,_tr_stored_block:Zn,_tr_flush_block:us,_tr_tally:le,_tr_align:cs}=ri(),ci=Bn(),ae=Nn(),hs=gt(),{Z_NO_FLUSH:fe,Z_PARTIAL_FLUSH:ds,Z_FULL_FLUSH:_s,Z_FINISH:q,Z_BLOCK:li,Z_OK:R,Z_STREAM_END:fi,Z_STREAM_ERROR:G,Z_DATA_ERROR:ws,Z_BUF_ERROR:qn,Z_DEFAULT_COMPRESSION:ps,Z_FILTERED:gs,Z_HUFFMAN_ONLY:bt,Z_RLE:bs,Z_FIXED:ys,Z_DEFAULT_STRATEGY:vs,Z_UNKNOWN:ks,Z_DEFLATED:yt}=ie(),Cs=9,Es=15,xs=8,ms=29,Ts=256,$n=Ts+1+ms,Ds=30,As=19,Ss=2*$n+1,Us=15,T=3,se=258,Y=se+T+1,Ps=32,Se=42,Vn=57,Hn=69,Wn=73,Gn=91,Yn=103,ge=113,Ye=666,z=1,Pe=2,ye=3,Me=4,Ms=3,be=(e,n)=>(e.msg=hs[n],n),ui=e=>e*2-(e>4?9:0),oe=e=>{let n=e.length;for(;--n>=0;)e[n]=0},Ls=e=>{let n,t,r,a=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=a?t-a:0;while(--n);n=a,r=n;do t=e.prev[--r],e.prev[r]=t>=a?t-a:0;while(--n)},Is=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask,ue=Is,B=e=>{let n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},N=(e,n)=>{us(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,B(e.strm)},S=(e,n)=>{e.pending_buf[e.pending++]=n},Ge=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=n&255},Xn=(e,n,t,r)=>{let a=e.avail_in;return a>r&&(a=r),a===0?0:(e.avail_in-=a,n.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=ci(e.adler,n,a,t):e.state.wrap===2&&(e.adler=ae(e.adler,n,a,t)),e.next_in+=a,e.total_in+=a,a)},hi=(e,n)=>{let t=e.max_chain_length,r=e.strstart,a,i,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-Y?e.strstart-(e.w_size-Y):0,l=e.window,f=e.w_mask,c=e.prev,d=e.strstart+se,h=l[r+o-1],_=l[r+o];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do if(a=n,!(l[a+o]!==_||l[a+o-1]!==h||l[a]!==l[r]||l[++a]!==l[r+1])){r+=2,a++;do;while(l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&l[++r]===l[++a]&&r<d);if(i=se-(d-r),r=d-se,i>o){if(e.match_start=n,o=i,i>=s)break;h=l[r+o-1],_=l[r+o]}}while((n=c[n&f])>u&&--t!==0);return o<=e.lookahead?o:e.lookahead},Ue=e=>{let n=e.w_size,t,r,a;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-Y)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),Ls(e),r+=n),e.strm.avail_in===0)break;if(t=Xn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=T)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=ue(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=ue(e,e.ins_h,e.window[a+T-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<Y&&e.strm.avail_in!==0)},di=(e,n)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,a,i,o=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,r>a+e.strm.avail_in&&(r=a+e.strm.avail_in),r>i&&(r=i),r<t&&(r===0&&n!==q||n===fe||r!==a+e.strm.avail_in)))break;o=n===q&&r===a+e.strm.avail_in?1:0,Zn(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,B(e.strm),a&&(a>r&&(a=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,r-=a),r&&(Xn(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Me:n!==fe&&n!==q&&e.strm.avail_in===0&&e.strstart===e.block_start?Pe:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Xn(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,t=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=t||(a||n===q)&&n!==fe&&e.strm.avail_in===0&&a<=i)&&(r=a>i?i:a,o=n===q&&e.strm.avail_in===0&&r===a?1:0,Zn(e,e.block_start,r,o),e.block_start+=r,B(e.strm)),o?ye:z)},jn=(e,n)=>{let t,r;for(;;){if(e.lookahead<Y){if(Ue(e),e.lookahead<Y&&n===fe)return z;if(e.lookahead===0)break}if(t=0,e.lookahead>=T&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+T-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Y&&(e.match_length=hi(e,t)),e.match_length>=T)if(r=le(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){e.match_length--;do e.strstart++,e.ins_h=ue(e,e.ins_h,e.window[e.strstart+T-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ue(e,e.ins_h,e.window[e.strstart+1]);else r=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(N(e,!1),e.strm.avail_out===0))return z}return e.insert=e.strstart<T-1?e.strstart:T-1,n===q?(N(e,!0),e.strm.avail_out===0?ye:Me):e.sym_next&&(N(e,!1),e.strm.avail_out===0)?z:Pe},Ae=(e,n)=>{let t,r,a;for(;;){if(e.lookahead<Y){if(Ue(e),e.lookahead<Y&&n===fe)return z;if(e.lookahead===0)break}if(t=0,e.lookahead>=T&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+T-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Y&&(e.match_length=hi(e,t),e.match_length<=5&&(e.strategy===gs||e.match_length===T&&e.strstart-e.match_start>4096)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-T,r=le(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=ue(e,e.ins_h,e.window[e.strstart+T-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=T-1,e.strstart++,r&&(N(e,!1),e.strm.avail_out===0))return z}else if(e.match_available){if(r=le(e,0,e.window[e.strstart-1]),r&&N(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=le(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,n===q?(N(e,!0),e.strm.avail_out===0?ye:Me):e.sym_next&&(N(e,!1),e.strm.avail_out===0)?z:Pe},Rs=(e,n)=>{let t,r,a,i,o=e.window;for(;;){if(e.lookahead<=se){if(Ue(e),e.lookahead<=se&&n===fe)return z;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=T&&e.strstart>0&&(a=e.strstart-1,r=o[a],r===o[++a]&&r===o[++a]&&r===o[++a])){i=e.strstart+se;do;while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=se-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(t=le(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(N(e,!1),e.strm.avail_out===0))return z}return e.insert=0,n===q?(N(e,!0),e.strm.avail_out===0?ye:Me):e.sym_next&&(N(e,!1),e.strm.avail_out===0)?z:Pe},zs=(e,n)=>{let t;for(;;){if(e.lookahead===0&&(Ue(e),e.lookahead===0)){if(n===fe)return z;break}if(e.match_length=0,t=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(N(e,!1),e.strm.avail_out===0))return z}return e.insert=0,n===q?(N(e,!0),e.strm.avail_out===0?ye:Me):e.sym_next&&(N(e,!1),e.strm.avail_out===0)?z:Pe};function W(e,n,t,r,a){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=a}var Xe=[new W(0,0,0,0,di),new W(4,4,8,4,jn),new W(4,5,16,8,jn),new W(4,6,32,32,jn),new W(4,4,16,16,Ae),new W(8,16,32,32,Ae),new W(8,16,128,128,Ae),new W(8,32,128,256,Ae),new W(32,128,258,1024,Ae),new W(32,258,258,4096,Ae)],Os=e=>{e.window_size=2*e.w_size,oe(e.head),e.max_lazy_match=Xe[e.level].max_lazy,e.good_match=Xe[e.level].good_length,e.nice_match=Xe[e.level].nice_length,e.max_chain_length=Xe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=T-1,e.match_available=0,e.ins_h=0};function Fs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ss*2),this.dyn_dtree=new Uint16Array((2*Ds+1)*2),this.bl_tree=new Uint16Array((2*As+1)*2),oe(this.dyn_ltree),oe(this.dyn_dtree),oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Us+1),this.heap=new Uint16Array(2*$n+1),oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*$n+1),oe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ve=e=>{if(!e)return 1;let n=e.state;return!n||n.strm!==e||n.status!==Se&&n.status!==Vn&&n.status!==Hn&&n.status!==Wn&&n.status!==Gn&&n.status!==Yn&&n.status!==ge&&n.status!==Ye?1:0},_i=e=>{if(Ve(e))return be(e,G);e.total_in=e.total_out=0,e.data_type=ks;let n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?Vn:n.wrap?Se:ge,e.adler=n.wrap===2?0:1,n.last_flush=-2,fs(n),R},wi=e=>{let n=_i(e);return n===R&&Os(e.state),n},Bs=(e,n)=>Ve(e)||e.state.wrap!==2?G:(e.state.gzhead=n,R),pi=(e,n,t,r,a,i)=>{if(!e)return G;let o=1;if(n===ps&&(n=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>Cs||t!==yt||r<8||r>15||n<0||n>9||i<0||i>ys||r===8&&o!==1)return be(e,G);r===8&&(r=9);let s=new Fs;return e.state=s,s.strm=e,s.status=Se,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+T-1)/T),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=n,s.strategy=i,s.method=t,wi(e)},Ns=(e,n)=>pi(e,n,yt,Es,xs,vs),qs=(e,n)=>{if(Ve(e)||n>li||n<0)return e?be(e,G):G;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Ye&&n!==q)return be(e,e.avail_out===0?qn:G);let r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(B(e),e.avail_out===0)return t.last_flush=-1,R}else if(e.avail_in===0&&ui(n)<=ui(r)&&n!==q)return be(e,qn);if(t.status===Ye&&e.avail_in!==0)return be(e,qn);if(t.status===Se&&t.wrap===0&&(t.status=ge),t.status===Se){let a=yt+(t.w_bits-8<<4)<<8,i=-1;if(t.strategy>=bt||t.level<2?i=0:t.level<6?i=1:t.level===6?i=2:i=3,a|=i<<6,t.strstart!==0&&(a|=Ps),a+=31-a%31,Ge(t,a),t.strstart!==0&&(Ge(t,e.adler>>>16),Ge(t,e.adler&65535)),e.adler=1,t.status=ge,B(e),t.pending!==0)return t.last_flush=-1,R}if(t.status===Vn){if(e.adler=0,S(t,31),S(t,139),S(t,8),t.gzhead)S(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),S(t,t.gzhead.time&255),S(t,t.gzhead.time>>8&255),S(t,t.gzhead.time>>16&255),S(t,t.gzhead.time>>24&255),S(t,t.level===9?2:t.strategy>=bt||t.level<2?4:0),S(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(S(t,t.gzhead.extra.length&255),S(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=ae(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Hn;else if(S(t,0),S(t,0),S(t,0),S(t,0),S(t,0),S(t,t.level===9?2:t.strategy>=bt||t.level<2?4:0),S(t,Ms),t.status=ge,B(e),t.pending!==0)return t.last_flush=-1,R}if(t.status===Hn){if(t.gzhead.extra){let a=t.pending,i=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+i>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=s,B(e),t.pending!==0)return t.last_flush=-1,R;a=0,i-=s}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+i),t.pending),t.pending+=i,t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Wn}if(t.status===Wn){if(t.gzhead.name){let a=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a)),B(e),t.pending!==0)return t.last_flush=-1,R;a=0}t.gzindex<t.gzhead.name.length?i=t.gzhead.name.charCodeAt(t.gzindex++)&255:i=0,S(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Gn}if(t.status===Gn){if(t.gzhead.comment){let a=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a)),B(e),t.pending!==0)return t.last_flush=-1,R;a=0}t.gzindex<t.gzhead.comment.length?i=t.gzhead.comment.charCodeAt(t.gzindex++)&255:i=0,S(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ae(e.adler,t.pending_buf,t.pending-a,a))}t.status=Yn}if(t.status===Yn){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(B(e),t.pending!==0))return t.last_flush=-1,R;S(t,e.adler&255),S(t,e.adler>>8&255),e.adler=0}if(t.status=ge,B(e),t.pending!==0)return t.last_flush=-1,R}if(e.avail_in!==0||t.lookahead!==0||n!==fe&&t.status!==Ye){let a=t.level===0?di(t,n):t.strategy===bt?zs(t,n):t.strategy===bs?Rs(t,n):Xe[t.level].func(t,n);if((a===ye||a===Me)&&(t.status=Ye),a===z||a===ye)return e.avail_out===0&&(t.last_flush=-1),R;if(a===Pe&&(n===ds?cs(t):n!==li&&(Zn(t,0,0,!1),n===_s&&(oe(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),B(e),e.avail_out===0))return t.last_flush=-1,R}return n!==q?R:t.wrap<=0?fi:(t.wrap===2?(S(t,e.adler&255),S(t,e.adler>>8&255),S(t,e.adler>>16&255),S(t,e.adler>>24&255),S(t,e.total_in&255),S(t,e.total_in>>8&255),S(t,e.total_in>>16&255),S(t,e.total_in>>24&255)):(Ge(t,e.adler>>>16),Ge(t,e.adler&65535)),B(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?R:fi)},js=e=>{if(Ve(e))return G;let n=e.state.status;return e.state=null,n===ge?be(e,ws):R},Zs=(e,n)=>{let t=n.length;if(Ve(e))return G;let r=e.state,a=r.wrap;if(a===2||a===1&&r.status!==Se||r.lookahead)return G;if(a===1&&(e.adler=ci(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){a===0&&(oe(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(n.subarray(t-r.w_size,t),0),n=u,t=r.w_size}let i=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Ue(r);r.lookahead>=T;){let u=r.strstart,l=r.lookahead-(T-1);do r.ins_h=ue(r,r.ins_h,r.window[u+T-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--l);r.strstart=u,r.lookahead=T-1,Ue(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=T-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=i,r.wrap=a,R};X.exports.deflateInit=Ns;X.exports.deflateInit2=pi;X.exports.deflateReset=wi;X.exports.deflateResetKeep=_i;X.exports.deflateSetHeader=Bs;X.exports.deflate=qs;X.exports.deflateEnd=js;X.exports.deflateSetDictionary=Zs;X.exports.deflateInfo="pako deflate (from Nodeca project)"});var Jn=p((qu,Kn)=>{"use strict";var $s=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);Kn.exports.assign=function(e){let n=Array.prototype.slice.call(arguments,1);for(;n.length;){let t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)$s(t,r)&&(e[r]=t[r])}}return e};Kn.exports.flattenChunks=e=>{let n=0;for(let r=0,a=e.length;r<a;r++)n+=e[r].length;let t=new Uint8Array(n);for(let r=0,a=0,i=e.length;r<i;r++){let o=e[r];t.set(o,a),a+=o.length}return t}});var Qn=p((ju,vt)=>{"use strict";var bi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{bi=!1}var Ke=new Uint8Array(256);for(let e=0;e<256;e++)Ke[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ke[254]=Ke[254]=1;vt.exports.string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,a,i,o=e.length,s=0;for(a=0;a<o;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<o&&(r=e.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(s),i=0,a=0;i<s;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<o&&(r=e.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),t<128?n[i++]=t:t<2048?(n[i++]=192|t>>>6,n[i++]=128|t&63):t<65536?(n[i++]=224|t>>>12,n[i++]=128|t>>>6&63,n[i++]=128|t&63):(n[i++]=240|t>>>18,n[i++]=128|t>>>12&63,n[i++]=128|t>>>6&63,n[i++]=128|t&63);return n};var Hs=(e,n)=>{if(n<65534&&e.subarray&&bi)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let t="";for(let r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t};vt.exports.buf2string=(e,n)=>{let t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,a,i=new Array(t*2);for(a=0,r=0;r<t;){let o=e[r++];if(o<128){i[a++]=o;continue}let s=Ke[o];if(s>4){i[a++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<t;)o=o<<6|e[r++]&63,s--;if(s>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return Hs(i,a)};vt.exports.utf8border=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?n:t+Ke[e[t]]>n?t:n}});var er=p((Zu,yi)=>{"use strict";function Ws(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}yi.exports=Ws});var Ei=p(($u,Le)=>{"use strict";var Je=gi(),vi=Jn(),ki=Qn(),tr=gt(),Gs=er(),Ci=Object.prototype.toString,{Z_NO_FLUSH:Ys,Z_SYNC_FLUSH:Xs,Z_FULL_FLUSH:Vs,Z_FINISH:Ks,Z_OK:kt,Z_STREAM_END:Js,Z_DEFAULT_COMPRESSION:Qs,Z_DEFAULT_STRATEGY:el,Z_DEFLATED:tl}=ie();function Qe(e){this.options=vi.assign({level:Qs,method:tl,chunkSize:16384,windowBits:15,memLevel:8,strategy:el},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gs,this.strm.avail_out=0;let t=Je.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==kt)throw new Error(tr[t]);if(n.header&&Je.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(typeof n.dictionary=="string"?r=ki.string2buf(n.dictionary):Ci.call(n.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(n.dictionary):r=n.dictionary,t=Je.deflateSetDictionary(this.strm,r),t!==kt)throw new Error(tr[t]);this._dict_set=!0}}Qe.prototype.push=function(e,n){let t=this.strm,r=this.options.chunkSize,a,i;if(this.ended)return!1;for(n===~~n?i=n:i=n===!0?Ks:Ys,typeof e=="string"?t.input=ki.string2buf(e):Ci.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(i===Xs||i===Vs)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=Je.deflate(t,i),a===Js)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Je.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===kt;if(t.avail_out===0){this.onData(t.output);continue}if(i>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Qe.prototype.onData=function(e){this.chunks.push(e)};Qe.prototype.onEnd=function(e){e===kt&&(this.result=vi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function nr(e,n){let t=new Qe(n);if(t.push(e,!0),t.err)throw t.msg||tr[t.err];return t.result}function nl(e,n){return n=n||{},n.raw=!0,nr(e,n)}function rl(e,n){return n=n||{},n.gzip=!0,nr(e,n)}Le.exports.Deflate=Qe;Le.exports.deflate=nr;Le.exports.deflateRaw=nl;Le.exports.gzip=rl;Le.exports.constants=ie()});var mi=p((Hu,xi)=>{"use strict";xi.exports=function(n,t){let r,a,i,o,s,u,l,f,c,d,h,_,E,v,g,C,y,w,D,L,b,A,x,k,m=n.state;r=n.next_in,x=n.input,a=r+(n.avail_in-5),i=n.next_out,k=n.output,o=i-(t-n.avail_out),s=i+(n.avail_out-257),u=m.dmax,l=m.wsize,f=m.whave,c=m.wnext,d=m.window,h=m.hold,_=m.bits,E=m.lencode,v=m.distcode,g=(1<<m.lenbits)-1,C=(1<<m.distbits)-1;e:do{_<15&&(h+=x[r++]<<_,_+=8,h+=x[r++]<<_,_+=8),y=E[h&g];t:for(;;){if(w=y>>>24,h>>>=w,_-=w,w=y>>>16&255,w===0)k[i++]=y&65535;else if(w&16){D=y&65535,w&=15,w&&(_<w&&(h+=x[r++]<<_,_+=8),D+=h&(1<<w)-1,h>>>=w,_-=w),_<15&&(h+=x[r++]<<_,_+=8,h+=x[r++]<<_,_+=8),y=v[h&C];n:for(;;){if(w=y>>>24,h>>>=w,_-=w,w=y>>>16&255,w&16){if(L=y&65535,w&=15,_<w&&(h+=x[r++]<<_,_+=8,_<w&&(h+=x[r++]<<_,_+=8)),L+=h&(1<<w)-1,L>u){n.msg="invalid distance too far back",m.mode=16209;break e}if(h>>>=w,_-=w,w=i-o,L>w){if(w=L-w,w>f&&m.sane){n.msg="invalid distance too far back",m.mode=16209;break e}if(b=0,A=d,c===0){if(b+=l-w,w<D){D-=w;do k[i++]=d[b++];while(--w);b=i-L,A=k}}else if(c<w){if(b+=l+c-w,w-=c,w<D){D-=w;do k[i++]=d[b++];while(--w);if(b=0,c<D){w=c,D-=w;do k[i++]=d[b++];while(--w);b=i-L,A=k}}}else if(b+=c-w,w<D){D-=w;do k[i++]=d[b++];while(--w);b=i-L,A=k}for(;D>2;)k[i++]=A[b++],k[i++]=A[b++],k[i++]=A[b++],D-=3;D&&(k[i++]=A[b++],D>1&&(k[i++]=A[b++]))}else{b=i-L;do k[i++]=k[b++],k[i++]=k[b++],k[i++]=k[b++],D-=3;while(D>2);D&&(k[i++]=k[b++],D>1&&(k[i++]=k[b++]))}}else if(w&64){n.msg="invalid distance code",m.mode=16209;break e}else{y=v[(y&65535)+(h&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){m.mode=16191;break e}else{n.msg="invalid literal/length code",m.mode=16209;break e}else{y=E[(y&65535)+(h&(1<<w)-1)];continue t}break}}while(r<a&&i<s);D=_>>3,r-=D,_-=D<<3,h&=(1<<_)-1,n.next_in=r,n.next_out=i,n.avail_in=r<a?5+(a-r):5-(r-a),n.avail_out=i<s?257+(s-i):257-(i-s),m.hold=h,m.bits=_}});var Di=p((Wu,Ti)=>{"use strict";var il=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),al=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ol=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sl=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ll=(e,n,t,r,a,i,o,s)=>{let u=s.bits,l=0,f=0,c=0,d=0,h=0,_=0,E=0,v=0,g=0,C=0,y,w,D,L,b,A=null,x,k=new Uint16Array(15+1),m=new Uint16Array(15+1),we=null,Rr,ft,ut;for(l=0;l<=15;l++)k[l]=0;for(f=0;f<r;f++)k[n[t+f]]++;for(h=u,d=15;d>=1&&k[d]===0;d--);if(h>d&&(h=d),d===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,s.bits=1,0;for(c=1;c<d&&k[c]===0;c++);for(h<c&&(h=c),v=1,l=1;l<=15;l++)if(v<<=1,v-=k[l],v<0)return-1;if(v>0&&(e===0||d!==1))return-1;for(m[1]=0,l=1;l<15;l++)m[l+1]=m[l]+k[l];for(f=0;f<r;f++)n[t+f]!==0&&(o[m[n[t+f]]++]=f);if(e===0?(A=we=o,x=20):e===1?(A=il,we=al,x=257):(A=ol,we=sl,x=0),C=0,f=0,l=c,b=i,_=h,E=0,D=-1,g=1<<h,L=g-1,e===1&&g>852||e===2&&g>592)return 1;for(;;){Rr=l-E,o[f]+1<x?(ft=0,ut=o[f]):o[f]>=x?(ft=we[o[f]-x],ut=A[o[f]-x]):(ft=32+64,ut=0),y=1<<l-E,w=1<<_,c=w;do w-=y,a[b+(C>>E)+w]=Rr<<24|ft<<16|ut|0;while(w!==0);for(y=1<<l-1;C&y;)y>>=1;if(y!==0?(C&=y-1,C+=y):C=0,f++,--k[l]===0){if(l===d)break;l=n[t+o[f]]}if(l>h&&(C&L)!==D){for(E===0&&(E=h),b+=c,_=l-E,v=1<<_;_+E<d&&(v-=k[_+E],!(v<=0));)_++,v<<=1;if(g+=1<<_,e===1&&g>852||e===2&&g>592)return 1;D=C&L,a[D]=h<<24|_<<16|b-i|0}}return C!==0&&(a[b+C]=l-E<<24|64<<16|0),s.bits=h,0};Ti.exports=ll});var la=p((Gu,$)=>{"use strict";var lr=Bn(),V=Nn(),fl=mi(),et=Di(),ul=0,Qi=1,ea=2,{Z_FINISH:Ai,Z_BLOCK:cl,Z_TREES:Ct,Z_OK:ve,Z_STREAM_END:hl,Z_NEED_DICT:dl,Z_STREAM_ERROR:j,Z_DATA_ERROR:ta,Z_MEM_ERROR:fr,Z_BUF_ERROR:_l,Z_DEFLATED:Si}=ie(),Tt=16180,Ui=16181,Pi=16182,Mi=16183,Li=16184,Ii=16185,Ri=16186,zi=16187,Oi=16188,Fi=16189,mt=16190,te=16191,rr=16192,Bi=16193,ir=16194,Ni=16195,qi=16196,ji=16197,Zi=16198,Et=16199,xt=16200,$i=16201,Hi=16202,Wi=16203,Gi=16204,Yi=16205,ar=16206,Xi=16207,Vi=16208,M=16209,ur=16210,na=16211,wl=852,pl=592,gl=15,bl=gl,Ki=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function yl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ke=e=>{if(!e)return 1;let n=e.state;return!n||n.strm!==e||n.mode<Tt||n.mode>na?1:0},ra=e=>{if(ke(e))return j;let n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Tt,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(wl),n.distcode=n.distdyn=new Int32Array(pl),n.sane=1,n.back=-1,ve},ia=e=>{if(ke(e))return j;let n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,ra(e)},aa=(e,n)=>{let t;if(ke(e))return j;let r=e.state;return n<0?(t=0,n=-n):(t=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?j:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,ia(e))},oa=(e,n)=>{if(!e)return j;let t=new yl;e.state=t,t.strm=e,t.window=null,t.mode=Tt;let r=aa(e,n);return r!==ve&&(e.state=null),r},vl=e=>oa(e,bl),Ji=!0,or,sr,kl=e=>{if(Ji){or=new Int32Array(512),sr=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(et(Qi,e.lens,0,288,or,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;et(ea,e.lens,0,32,sr,0,e.work,{bits:5}),Ji=!1}e.lencode=or,e.lenbits=9,e.distcode=sr,e.distbits=5},sa=(e,n,t,r)=>{let a,i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(n.subarray(t-i.wsize,t),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(n.subarray(t-r,t-r+a),i.wnext),r-=a,r?(i.window.set(n.subarray(t-r,t),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Cl=(e,n)=>{let t,r,a,i,o,s,u,l,f,c,d,h,_,E,v=0,g,C,y,w,D,L,b,A,x=new Uint8Array(4),k,m,we=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ke(e)||!e.output||!e.input&&e.avail_in!==0)return j;t=e.state,t.mode===te&&(t.mode=rr),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,l=t.hold,f=t.bits,c=s,d=u,A=ve;e:for(;;)switch(t.mode){case Tt:if(t.wrap===0){t.mode=rr;break}for(;f<16;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,x[0]=l&255,x[1]=l>>>8&255,t.check=V(t.check,x,2,0),l=0,f=0,t.mode=Ui;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=M;break}if((l&15)!==Si){e.msg="unknown compression method",t.mode=M;break}if(l>>>=4,f-=4,b=(l&15)+8,t.wbits===0&&(t.wbits=b),b>15||b>t.wbits){e.msg="invalid window size",t.mode=M;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?Fi:te,l=0,f=0;break;case Ui:for(;f<16;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(t.flags=l,(t.flags&255)!==Si){e.msg="unknown compression method",t.mode=M;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=M;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,t.check=V(t.check,x,2,0)),l=0,f=0,t.mode=Pi;case Pi:for(;f<32;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,t.check=V(t.check,x,4,0)),l=0,f=0,t.mode=Mi;case Mi:for(;f<16;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,t.check=V(t.check,x,2,0)),l=0,f=0,t.mode=Li;case Li:if(t.flags&1024){for(;f<16;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,t.check=V(t.check,x,2,0)),l=0,f=0}else t.head&&(t.head.extra=null);t.mode=Ii;case Ii:if(t.flags&1024&&(h=t.length,h>s&&(h=s),h&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(i,i+h),b)),t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,h,i)),s-=h,i+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Ri;case Ri:if(t.flags&2048){if(s===0)break e;h=0;do b=r[i+h++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&h<s);if(t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,h,i)),s-=h,i+=h,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=zi;case zi:if(t.flags&4096){if(s===0)break e;h=0;do b=r[i+h++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&h<s);if(t.flags&512&&t.wrap&4&&(t.check=V(t.check,r,h,i)),s-=h,i+=h,b)break e}else t.head&&(t.head.comment=null);t.mode=Oi;case Oi:if(t.flags&512){for(;f<16;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=M;break}l=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=te;break;case Fi:for(;f<32;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}e.adler=t.check=Ki(l),l=0,f=0,t.mode=mt;case mt:if(t.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,t.hold=l,t.bits=f,dl;e.adler=t.check=1,t.mode=te;case te:if(n===cl||n===Ct)break e;case rr:if(t.last){l>>>=f&7,f-=f&7,t.mode=ar;break}for(;f<3;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}switch(t.last=l&1,l>>>=1,f-=1,l&3){case 0:t.mode=Bi;break;case 1:if(kl(t),t.mode=Et,n===Ct){l>>>=2,f-=2;break e}break;case 2:t.mode=qi;break;case 3:e.msg="invalid block type",t.mode=M}l>>>=2,f-=2;break;case Bi:for(l>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=M;break}if(t.length=l&65535,l=0,f=0,t.mode=ir,n===Ct)break e;case ir:t.mode=Ni;case Ni:if(h=t.length,h){if(h>s&&(h=s),h>u&&(h=u),h===0)break e;a.set(r.subarray(i,i+h),o),s-=h,i+=h,u-=h,o+=h,t.length-=h;break}t.mode=te;break;case qi:for(;f<14;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(t.nlen=(l&31)+257,l>>>=5,f-=5,t.ndist=(l&31)+1,l>>>=5,f-=5,t.ncode=(l&15)+4,l>>>=4,f-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=M;break}t.have=0,t.mode=ji;case ji:for(;t.have<t.ncode;){for(;f<3;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.lens[we[t.have++]]=l&7,l>>>=3,f-=3}for(;t.have<19;)t.lens[we[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},A=et(ul,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,A){e.msg="invalid code lengths set",t.mode=M;break}t.have=0,t.mode=Zi;case Zi:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[l&(1<<t.lenbits)-1],g=v>>>24,C=v>>>16&255,y=v&65535,!(g<=f);){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(y<16)l>>>=g,f-=g,t.lens[t.have++]=y;else{if(y===16){for(m=g+2;f<m;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(l>>>=g,f-=g,t.have===0){e.msg="invalid bit length repeat",t.mode=M;break}b=t.lens[t.have-1],h=3+(l&3),l>>>=2,f-=2}else if(y===17){for(m=g+3;f<m;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}l>>>=g,f-=g,b=0,h=3+(l&7),l>>>=3,f-=3}else{for(m=g+7;f<m;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}l>>>=g,f-=g,b=0,h=11+(l&127),l>>>=7,f-=7}if(t.have+h>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=M;break}for(;h--;)t.lens[t.have++]=b}}if(t.mode===M)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=M;break}if(t.lenbits=9,k={bits:t.lenbits},A=et(Qi,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,A){e.msg="invalid literal/lengths set",t.mode=M;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},A=et(ea,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,A){e.msg="invalid distances set",t.mode=M;break}if(t.mode=Et,n===Ct)break e;case Et:t.mode=xt;case xt:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,t.hold=l,t.bits=f,fl(e,d),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,l=t.hold,f=t.bits,t.mode===te&&(t.back=-1);break}for(t.back=0;v=t.lencode[l&(1<<t.lenbits)-1],g=v>>>24,C=v>>>16&255,y=v&65535,!(g<=f);){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(C&&!(C&240)){for(w=g,D=C,L=y;v=t.lencode[L+((l&(1<<w+D)-1)>>w)],g=v>>>24,C=v>>>16&255,y=v&65535,!(w+g<=f);){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}l>>>=w,f-=w,t.back+=w}if(l>>>=g,f-=g,t.back+=g,t.length=y,C===0){t.mode=Yi;break}if(C&32){t.back=-1,t.mode=te;break}if(C&64){e.msg="invalid literal/length code",t.mode=M;break}t.extra=C&15,t.mode=$i;case $i:if(t.extra){for(m=t.extra;f<m;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Hi;case Hi:for(;v=t.distcode[l&(1<<t.distbits)-1],g=v>>>24,C=v>>>16&255,y=v&65535,!(g<=f);){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(!(C&240)){for(w=g,D=C,L=y;v=t.distcode[L+((l&(1<<w+D)-1)>>w)],g=v>>>24,C=v>>>16&255,y=v&65535,!(w+g<=f);){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}l>>>=w,f-=w,t.back+=w}if(l>>>=g,f-=g,t.back+=g,C&64){e.msg="invalid distance code",t.mode=M;break}t.offset=y,t.extra=C&15,t.mode=Wi;case Wi:if(t.extra){for(m=t.extra;f<m;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=M;break}t.mode=Gi;case Gi:if(u===0)break e;if(h=d-u,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=M;break}h>t.wnext?(h-=t.wnext,_=t.wsize-h):_=t.wnext-h,h>t.length&&(h=t.length),E=t.window}else E=a,_=o-t.offset,h=t.length;h>u&&(h=u),u-=h,t.length-=h;do a[o++]=E[_++];while(--h);t.length===0&&(t.mode=xt);break;case Yi:if(u===0)break e;a[o++]=t.length,u--,t.mode=xt;break;case ar:if(t.wrap){for(;f<32;){if(s===0)break e;s--,l|=r[i++]<<f,f+=8}if(d-=u,e.total_out+=d,t.total+=d,t.wrap&4&&d&&(e.adler=t.check=t.flags?V(t.check,a,d,o-d):lr(t.check,a,d,o-d)),d=u,t.wrap&4&&(t.flags?l:Ki(l))!==t.check){e.msg="incorrect data check",t.mode=M;break}l=0,f=0}t.mode=Xi;case Xi:if(t.wrap&&t.flags){for(;f<32;){if(s===0)break e;s--,l+=r[i++]<<f,f+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=M;break}l=0,f=0}t.mode=Vi;case Vi:A=hl;break e;case M:A=ta;break e;case ur:return fr;case na:default:return j}return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=s,t.hold=l,t.bits=f,(t.wsize||d!==e.avail_out&&t.mode<M&&(t.mode<ar||n!==Ai))&&sa(e,e.output,e.next_out,d-e.avail_out)?(t.mode=ur,fr):(c-=e.avail_in,d-=e.avail_out,e.total_in+=c,e.total_out+=d,t.total+=d,t.wrap&4&&d&&(e.adler=t.check=t.flags?V(t.check,a,d,e.next_out-d):lr(t.check,a,d,e.next_out-d)),e.data_type=t.bits+(t.last?64:0)+(t.mode===te?128:0)+(t.mode===Et||t.mode===ir?256:0),(c===0&&d===0||n===Ai)&&A===ve&&(A=_l),A)},El=e=>{if(ke(e))return j;let n=e.state;return n.window&&(n.window=null),e.state=null,ve},xl=(e,n)=>{if(ke(e))return j;let t=e.state;return t.wrap&2?(t.head=n,n.done=!1,ve):j},ml=(e,n)=>{let t=n.length,r,a,i;return ke(e)||(r=e.state,r.wrap!==0&&r.mode!==mt)?j:r.mode===mt&&(a=1,a=lr(a,n,t,0),a!==r.check)?ta:(i=sa(e,n,t,t),i?(r.mode=ur,fr):(r.havedict=1,ve))};$.exports.inflateReset=ia;$.exports.inflateReset2=aa;$.exports.inflateResetKeep=ra;$.exports.inflateInit=vl;$.exports.inflateInit2=oa;$.exports.inflate=Cl;$.exports.inflateEnd=El;$.exports.inflateGetHeader=xl;$.exports.inflateSetDictionary=ml;$.exports.inflateInfo="pako inflate (from Nodeca project)"});var ua=p((Yu,fa)=>{"use strict";function Tl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}fa.exports=Tl});var _a=p((Xu,Ie)=>{"use strict";var ne=la(),ha=Jn(),dr=Qn(),_r=gt(),Dl=er(),Al=ua(),da=Object.prototype.toString,{Z_NO_FLUSH:Sl,Z_FINISH:Ul,Z_OK:tt,Z_STREAM_END:cr,Z_NEED_DICT:hr,Z_STREAM_ERROR:Pl,Z_DATA_ERROR:ca,Z_MEM_ERROR:Ml}=ie();function nt(e){this.options=ha.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dl,this.strm.avail_out=0;let t=ne.inflateInit2(this.strm,n.windowBits);if(t!==tt)throw new Error(_r[t]);if(this.header=new Al,ne.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=dr.string2buf(n.dictionary):da.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=ne.inflateSetDictionary(this.strm,n.dictionary),t!==tt)))throw new Error(_r[t])}nt.prototype.push=function(e,n){let t=this.strm,r=this.options.chunkSize,a=this.options.dictionary,i,o,s;if(this.ended)return!1;for(n===~~n?o=n:o=n===!0?Ul:Sl,da.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),i=ne.inflate(t,o),i===hr&&a&&(i=ne.inflateSetDictionary(t,a),i===tt?i=ne.inflate(t,o):i===ca&&(i=hr));t.avail_in>0&&i===cr&&t.state.wrap>0&&e[t.next_in]!==0;)ne.inflateReset(t),i=ne.inflate(t,o);switch(i){case Pl:case ca:case hr:case Ml:return this.onEnd(i),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||i===cr))if(this.options.to==="string"){let u=dr.utf8border(t.output,t.next_out),l=t.next_out-u,f=dr.buf2string(t.output,u);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(u,u+l),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(i===tt&&s===0)){if(i===cr)return i=ne.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};nt.prototype.onData=function(e){this.chunks.push(e)};nt.prototype.onEnd=function(e){e===tt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ha.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function wr(e,n){let t=new nt(n);if(t.push(e),t.err)throw t.msg||_r[t.err];return t.result}function Ll(e,n){return n=n||{},n.raw=!0,wr(e,n)}Ie.exports.Inflate=nt;Ie.exports.inflate=wr;Ie.exports.inflateRaw=Ll;Ie.exports.ungzip=wr;Ie.exports.constants=ie()});var Dt=p((Vu,K)=>{"use strict";var{Deflate:Il,deflate:Rl,deflateRaw:zl,gzip:Ol}=Ei(),{Inflate:Fl,inflate:Bl,inflateRaw:Nl,ungzip:ql}=_a(),jl=ie();K.exports.Deflate=Il;K.exports.deflate=Rl;K.exports.deflateRaw=zl;K.exports.gzip=Ol;K.exports.Inflate=Fl;K.exports.inflate=Bl;K.exports.inflateRaw=Nl;K.exports.ungzip=ql;K.exports.constants=jl});var pr=p(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.paethPredicator=void 0;function Zl(e,n,t){let r=e+n-t,a=Math.abs(r-e),i=Math.abs(r-n),o=Math.abs(r-t);return a<=i&&a<=o?e:i<=o?n:t}At.paethPredicator=Zl});var ya=p(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.parseChunk=void 0;var $l=Dt(),St=U(),wa=pr();function Hl(e,n,t){let r=Wl(e,t),a;n.interlaceMethod===1?a=Xl(e,n,r):a=pa(e,n,r);let i=e.metadata.find(s=>s.type==="tRNS"),o=Vl(e,n,a,e.palette,i);return i&&(n.colorType===0||n.colorType===2)&&Kl(n,o,i),o}Pt.parseChunk=Hl;function Wl(e,n){let t=new $l.Inflate,r=0;for(let a of n)r=a.offset+4+4,t.push(e.view.buffer.slice(e.view.byteOffset+r,e.view.byteOffset+r+a.dataLength));if(t.err)throw(0,St.createChunkDecodeError)(e,n[0],`Inflate error: ${t.msg}`,n[0].offset);if(t.result===void 0)throw new St.DecodeError(e,"IDAT: Failed to decompress data chunks",0);return t.result}function pa(e,n,t,r=0,a=n.width,i=n.height){let o=0,s=gr(n),u=Ut(n),l=ga(n,a),f=Math.ceil(a*u),c=new Uint8Array(i*f),d=new Map;for(let h=0;h<i;h++){let _=r+h*(l+1),E=t[_++];if(!Gl)throw new St.DecodeError(e,`IDAT: Invalid filter type ${E}`,0);let v=d.get(E);v||(v=Yl(u,l,a,E),d.set(E,v));let g=1,C=0;switch(E){case 0:case 1:{for(;C<s;C++)c[o]=t[_+C],o++;break}case 3:{let y=0;for(;C<s;C++)y=o-a*s,c[o]=t[_+C]+Math.floor(0+(y<0?0:c[y]))/2,o++;break}case 2:{g=0;break}case 4:{for(;C<s;C++){let y=Math.floor(o-l);c[o]=(t[_+C]+(0,wa.paethPredicator)(0,y<0?0:c[y],0))%256,o++}break}}if(n.bitDepth>=8)for(;g<a;g++)for(let y=0;y<s;y++)c[o]=v(t,_+g*s+y,c,o),o++;else{for(g&&(o-=g),C=g;C<l;C++)c[o+C]=v(t,_+C,c,o+C);o+=l}}return c}function Gl(e){return e%1===0&&e>=0&&e<=4}function Yl(e,n,t,r){let a=0,i=0,o=0;switch(r){case 0:return(s,u)=>s[u];case 1:return(s,u,l,f)=>(s[u]+l[Math.floor(f-e)])%256;case 2:return(s,u,l,f)=>(i=Math.floor(f-t*e),i<0?s[u]:(s[u]+l[i])%256);case 3:return(s,u,l,f)=>(a=Math.floor(f-e),i=Math.floor(f-t*e),s[u]+Math.floor((a<0?0:l[a])+(i<0?0:l[i]))/2);case 4:return(s,u,l,f)=>(a=Math.floor(f-Math.ceil(e)),i=Math.floor(f-n),o=Math.floor(f-n-Math.ceil(e)),(s[u]+(0,wa.paethPredicator)(a<0?0:l[a],i<0?0:l[i],o<0?0:l[o]))%256)}}function gr(e){return Math.ceil(Ut(e))}function Ut(e){return ba(e.colorType)*e.bitDepth/8}function ga(e,n){return Math.ceil(ba(e.colorType)*e.bitDepth*n/8)}function ba(e){switch(e){case 0:return 1;case 2:return 3;case 3:return 1;case 4:return 2;case 6:return 4}}function Xl(e,n,t){let r=Ut(n),a=Math.ceil(n.width*r),i=new Uint8Array(a*n.height),o=gr(n),s=8/n.bitDepth,u=(1<<n.bitDepth)-1,l=[0,4,0,2,0,1,0],f=[0,0,4,0,2,0,1],c=[8,8,4,4,2,2,1],d=[8,8,8,4,4,2,2],h=0;for(let _=0;_<7;_++){let E=l[_],v=f[_],g=c[_],C=d[_],y=Math.ceil((n.width-E)/g),w=Math.ceil((n.height-v)/C),D=Math.ceil(r*y);if(y===0||w===0)continue;let L=pa(e,n,t,h,y,w),b=0;for(let A=0;A<w;A++){b=(v+A*C)*a+E*r;for(let x=0;x<y;x++){if(n.bitDepth<8){let k=L[A*D+Math.floor(x*r)];k>>=(s-x%s-1)*n.bitDepth,k&=u;let m=(s-1-b%1*s)*n.bitDepth;k<<=m,i[Math.floor(b)]|=k}else for(let k=0;k<o;k++)i[b+k]=L[(A*y+x)*o+k];b+=g*r}}h+=w*(1+ga(n,y))}return i}function Vl(e,n,t,r,a){let i=new(n.bitDepth===16?Uint16Array:Uint8Array)(n.width*n.height*4),o=0,s=gr(n),u=Ut(n),l=Math.ceil(n.width*u);switch(n.colorType){case 0:{switch(n.bitDepth){case 1:case 2:case 4:{let f=8/n.bitDepth,c=(1<<n.bitDepth)-1,d=n.bitDepth/8;for(let h=0;h<n.height;h++)for(let _=0;_<n.width;_++)o=(h*n.width+_)*4,i[o]=t[h*l+Math.floor(_*d)],i[o]>>=(f-_%f-1)*n.bitDepth,i[o]&=c,i[o]*=255/c,i[o+1]=i[o],i[o+2]=i[o],i[o+3]=255;break}case 8:case 16:{for(let f=0;f<n.height;f++)for(let c=0;c<n.width;c++)o=(f*n.width+c)*4,n.bitDepth===16?i[o]=t[(f*n.width+c)*s]<<8|t[(f*n.width+c)*s+1]:i[o]=t[(f*n.width+c)*s],i[o+1]=i[o],i[o+2]=i[o],i[o+3]=n.bitDepth===16?65535:255;break}}break}case 4:{for(let f=0;f<n.height;f++)for(let c=0;c<n.width;c++)o=(f*n.width+c)*4,n.bitDepth===16?i[o]=t[(f*n.width+c)*s]<<8|t[(f*n.width+c)*s+1]:i[o]=t[(f*n.width+c)*s],i[o+1]=i[o],i[o+2]=i[o],n.bitDepth===16?i[o+3]=t[(f*n.width+c)*s+2]<<8|t[(f*n.width+c)*s+3]:i[o+3]=t[(f*n.width+c)*s+1];break}case 3:{if(!r)throw new St.DecodeError(e,"IDAT: Cannot decode indexed color type without a palette",0);switch(n.bitDepth){case 1:case 2:case 4:{let f=8/n.bitDepth,c=(1<<n.bitDepth)-1,d=n.bitDepth/8;for(let h=0;h<n.height;h++)for(let _=0;_<n.width;_++){o=(h*n.width+_)*4;let E=t[h*l+Math.floor(_*d)];E>>=(f-_%f-1)*n.bitDepth,E&=c,r.setRgba(i,o,E),a&&a.transparency.length>E&&(i[o+3]=a.transparency[E])}break}case 8:{let f=0;for(let c=0;c<n.height;c++)for(let d=0;d<n.width;d++)o=(c*n.width+d)*4,f=t[c*n.width+d],r.setRgba(i,o,f),a&&a.transparency.length>f&&(i[o+3]=a.transparency[f]);break}}break}case 2:{for(let f=0;f<n.height;f++)for(let c=0;c<n.width;c++)o=(f*n.width+c)*4,n.bitDepth===16?(i[o]=t[(f*n.width+c)*s]<<8|t[(f*n.width+c)*s+1],i[o+1]=t[(f*n.width+c)*s+2]<<8|t[(f*n.width+c)*s+3],i[o+2]=t[(f*n.width+c)*s+4]<<8|t[(f*n.width+c)*s+5]):(i[o]=t[(f*n.width+c)*s],i[o+1]=t[(f*n.width+c)*s+1],i[o+2]=t[(f*n.width+c)*s+2]),i[o+3]=n.bitDepth===16?65535:255;break}case 6:{for(let f=0;f<n.height;f++)for(let c=0;c<n.width;c++)o=(f*n.width+c)*4,n.bitDepth===16?(i[o]=t[(f*n.width+c)*s]<<8|t[(f*n.width+c)*s+1],i[o+1]=t[(f*n.width+c)*s+2]<<8|t[(f*n.width+c)*s+3],i[o+2]=t[(f*n.width+c)*s+4]<<8|t[(f*n.width+c)*s+5],i[o+3]=t[(f*n.width+c)*s+6]<<8|t[(f*n.width+c)*s+7]):(i[o]=t[(f*n.width+c)*s],i[o+1]=t[(f*n.width+c)*s+1],i[o+2]=t[(f*n.width+c)*s+2],i[o+3]=t[(f*n.width+c)*s+3]);break}}return i}function Kl(e,n,t){let r=(1<<e.bitDepth)-1,a=e.bitDepth===16?65535:255;if(e.colorType===0){let i=a/r*t.transparency;for(let o=0;o<n.length;o+=4)n[o]===i&&(n[o+3]=0);return}if(e.colorType===2){let i=[a/r*t.transparency[0],a/r*t.transparency[1],a/r*t.transparency[2]];for(let o=0;o<n.length;o+=4)n[o]===i[0]&&n[o+1]===i[1]&&n[o+2]===i[2]&&(n[o+3]=0);return}}});var ka=p(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.parseChunk=void 0;var va=U();function Jl(e,n,t){(0,va.assertChunkFollows)(e,t,"IDAT"),(0,va.assertChunkDataLengthEquals)(e,t,0)}Mt.parseChunk=Jl});var Ca=p(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.isValidInterlaceMethod=J.isValidFilterMethod=J.isValidColorType=J.isValidBitDepth=void 0;function Ql(e){return e===1||e===2||e===4||e===8||e===16}J.isValidBitDepth=Ql;function ef(e,n){return e===0&&n>=1&&n<=16||e===2&&n>=8&&n<=16||e===3&&n>=1&&n<=8||e===4&&n>=8&&n<=16||e===6&&n>=8&&n<=16}J.isValidColorType=ef;function tf(e){return e===0}J.isValidFilterMethod=tf;function nf(e){return e===0||e===1}J.isValidInterlaceMethod=nf});var Ea=p(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.parseChunk=void 0;var ce=U(),Lt=Ca();function rf(e,n){(0,ce.assertChunkDataLengthEquals)(e,n,13);let t=n.offset+4+4,r=e.view.getUint32(t);t+=4;let a=e.view.getUint32(t);t+=4;let i=e.view.getUint8(t);if(!(0,Lt.isValidBitDepth)(i))throw(0,ce.createChunkDecodeError)(e,n,`Bit depth "${i}" is not valid`,t);t++;let o=e.view.getUint8(t);if(!(0,Lt.isValidColorType)(o,i))throw(0,ce.createChunkDecodeError)(e,n,`Color type "${o}" is not valid with bit depth "${i}"`,t);t++;let s=e.view.getUint8(t);(0,ce.assertChunkCompressionMethod)(e,n,s,t),t++;let u=e.view.getUint8(t);(0,Lt.isValidFilterMethod)(u)||((0,ce.handleWarning)(e,(0,ce.createChunkDecodeWarning)(n,`Filter method "${u}" is not valid`,t)),u=0),t++;let l=e.view.getUint8(t);return(0,Lt.isValidInterlaceMethod)(l)||((0,ce.handleWarning)(e,(0,ce.createChunkDecodeWarning)(n,`Interlace method "${l}" is not valid`,t)),l=0),t++,{width:r,height:a,bitDepth:i,colorType:o,interlaceMethod:l}}It.parseChunk=rf});var br=p(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.crc32=Re.getCrcTable=void 0;var rt;function xa(){if(rt)return rt;rt=[];for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)n&1?n=3988292384^n>>>1:n=n>>>1;rt[e]=n>>>0}return rt}Re.getCrcTable=xa;function af(e,n,t,r){let a=xa(),i=e;for(let o=0;o<r;o++)i=a[(i^n.getUint8(t+o))&255]^i>>>8;return i}function of(e,n,t){return(af(4294967295,e,n,t)^4294967295)>>>0}Re.crc32=of});var ma=p(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.parseChunk=void 0;var Rt=U();function sf(e,n,t){(0,Rt.assertChunkSinglular)(e,t),(0,Rt.assertChunkPrecedes)(e,t,"IDAT");let r=t.offset+4+4,a,i;switch(n.colorType){case 0:case 4:{a=e.view.getUint16(r),i=2;break}case 2:case 6:{a=[e.view.getUint16(r),e.view.getUint16(r+2),e.view.getUint16(r+4)],i=6;break}case 3:{a=e.view.getUint8(r),i=1;break}default:throw(0,Rt.createChunkDecodeWarning)(t,`Unrecognized color type "${n.colorType}"`,r)}return(0,Rt.assertChunkDataLengthEquals)(e,t,i),{type:"bKGD",color:a}}zt.parseChunk=sf});var Ta=p(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.parseChunk=void 0;var he=U();function lf(e,n,t){(0,he.assertChunkSinglular)(e,t),(0,he.assertChunkPrecedes)(e,t,"PLTE"),(0,he.assertChunkPrecedes)(e,t,"IDAT"),(0,he.assertChunkDataLengthEquals)(e,t,32);let r=t.offset+4+4,a={x:e.view.getUint32(r)/1e5,y:e.view.getUint32(r+4)/1e5};if(a.x>1||a.y>1)throw(0,he.createChunkDecodeWarning)(t,`Invalid white point (${a.x},${a.y})`,r);r+=8;let i={x:e.view.getUint32(r)/1e5,y:e.view.getUint32(r+4)/1e5};if(i.x>1||i.y>1)throw(0,he.createChunkDecodeWarning)(t,`Invalid red (${i.x},${i.y})`,r);r+=8;let o={x:e.view.getUint32(r)/1e5,y:e.view.getUint32(r+4)/1e5};if(o.x>1||o.y>1)throw(0,he.createChunkDecodeWarning)(t,`Invalid green (${o.x},${o.y})`,r);r+=8;let s={x:e.view.getUint32(r)/1e5,y:e.view.getUint32(r+4)/1e5};if(s.x>1||s.y>1)throw(0,he.createChunkDecodeWarning)(t,`Invalid blue (${s.x},${s.y})`,r);return{type:"cHRM",whitePoint:a,red:i,green:o,blue:s}}Ot.parseChunk=lf});var Da=p(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.parseChunk=void 0;function ff(e,n,t){let r=t.offset+4+4;return{type:"eXIf",value:e.view.buffer.slice(e.view.byteOffset+r,e.view.byteOffset+r+t.dataLength)}}Ft.parseChunk=ff});var Aa=p(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.parseChunk=void 0;var ze=U();function uf(e,n,t){(0,ze.assertChunkSinglular)(e,t),(0,ze.assertChunkPrecedes)(e,t,"PLTE"),(0,ze.assertChunkPrecedes)(e,t,"IDAT"),(0,ze.assertChunkDataLengthEquals)(e,t,4);let r=t.offset+4+4,a=e.view.getUint32(r)/1e5;return a===0&&(0,ze.handleWarning)(e,(0,ze.createChunkDecodeWarning)(t,"A value of 0 is meaningless",r)),{type:"gAMA",value:a}}Bt.parseChunk=uf});var Sa=p(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.parseChunk=void 0;var Nt=U();function cf(e,n,t){(0,Nt.assertChunkSinglular)(e,t),(0,Nt.assertChunkFollows)(e,t,"PLTE"),(0,Nt.assertChunkPrecedes)(e,t,"IDAT"),(0,Nt.assertChunkDataLengthEquals)(e,t,e.palette.size*2);let r=t.offset+4+4,a=[];for(let i=0;i<e.palette.size*2;i+=2)a.push(e.view.getUint16(r+i));return{type:"hIST",frequency:a}}qt.parseChunk=cf});var de=p(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.readText=void 0;var hf=Dt(),yr=U();function df(e,n,t,r,a,i,o,s){let u=[],l=0,f=0;for(;(r===void 0||f<r)&&!(!o&&a===i);f++){try{l=e.view.getUint8(a)}catch(d){throw d instanceof Error&&d.message==="Offset is outside the bounds of the DataView"?(0,yr.createChunkDecodeWarning)(n,"EOF while reading text",a):d}if(!s&&l===0)break;a++,u.push(l)}if(o&&e.view.getUint8(a)!==0)throw(0,yr.createChunkDecodeWarning)(n,"No null character after text",a);let c=new Uint8Array(u);if(s){let d=new hf.Inflate;if(d.push(c),d.err)throw(0,yr.createChunkDecodeWarning)(n,`Inflate error: ${d.msg}`,a);c=d.result}return{text:t?t.decode(c):String.fromCharCode(...u),bytesRead:f+1}}jt.readText=df});var Ua=p(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.parseChunk=void 0;var Oe=U(),_f=de();function wf(e,n,t){(0,Oe.assertChunkSinglular)(e,t),(0,Oe.assertChunkMutualExclusion)(e,t,"sRGB"),(0,Oe.assertChunkPrecedes)(e,t,"PLTE"),(0,Oe.assertChunkPrecedes)(e,t,"IDAT"),(0,Oe.assertChunkDataLengthGte)(e,t,3);let r=t.offset+4+4,a=r+t.dataLength,i=r,o=new TextDecoder("latin1"),s=(0,_f.readText)(e,t,o,79,i,a,!0);i+=s.bytesRead;let u=s.text,l=e.view.getUint8(i);(0,Oe.assertChunkCompressionMethod)(e,t,l,i),i++;let f=new Uint8Array(e.view.buffer.slice(e.view.byteOffset+i,e.view.byteOffset+a));return{type:"iCCP",name:u,data:f}}Zt.parseChunk=wf});var Ma=p(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.parseChunk=void 0;var Pa=U(),$t=de();function pf(e,n,t){(0,Pa.assertChunkDataLengthGte)(e,t,6);let r=t.offset+4+4,a=r+t.dataLength,i=new TextDecoder("utf8"),o;o=(0,$t.readText)(e,t,i,79,r,a,!0),r+=o.bytesRead;let s=o.text,u=e.view.getUint8(r++)===1,l=e.view.getUint8(r);u&&(0,Pa.assertChunkCompressionMethod)(e,t,l,r),r++,o=(0,$t.readText)(e,t,i,void 0,r,a,!0),r+=o.bytesRead;let f=o.text;o=(0,$t.readText)(e,t,i,void 0,r,a,!0),r+=o.bytesRead;let c=o.text;o=(0,$t.readText)(e,t,i,void 0,r,a,!1,u),r+=o.bytesRead;let d=o.text;return{type:"iTXt",keyword:s,languageTag:f,translatedKeyword:c,text:d}}Ht.parseChunk=pf});var Ia=p(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.parseChunk=void 0;var La=U();function gf(e,n,t){(0,La.assertChunkSinglular)(e,t),(0,La.assertChunkDataLengthEquals)(e,t,7);let r=t.offset+4+4,a=e.view.getUint16(r);r+=2;let i=e.view.getUint8(r++),o=e.view.getUint8(r++),s=e.view.getUint8(r++),u=e.view.getUint8(r++),l=e.view.getUint8(r++);return{type:"tIME",value:new Date(a,i,o,s,u,l)}}Wt.parseChunk=gf});var Ra=p(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.parseChunk=void 0;var Gt=U();function bf(e,n,t){(0,Gt.assertChunkSinglular)(e,t),(0,Gt.assertChunkPrecedes)(e,t,"IDAT"),(0,Gt.assertChunkDataLengthEquals)(e,t,9);let r=t.offset+4+4,a=e.view.getInt32(r);r+=4;let i=e.view.getInt32(r);r+=4;let o=e.view.getUint8(r),s;switch(o){case 0:s="pixel";break;case 1:s="micrometer";break;default:throw(0,Gt.createChunkDecodeWarning)(t,`Invalid oFFs unit type ("${o}")`,r)}return{type:"oFFs",offset:{x:a,y:i},unitType:s}}Yt.parseChunk=bf});var vr=p(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.readFloat=void 0;var za=U(),yf=de();function vf(e,n,t,r,a,i){let o=(0,yf.readText)(e,n,t,void 0,r,a,i);r+=o.bytesRead,kf(o.text)||(0,za.handleWarning)(e,(0,za.createChunkDecodeWarning)(n,`Invalid character in floating point number ("${o.text}")`,r));let s=parseFloat(o.text);return{bytesRead:o.bytesRead,value:s}}Xt.readFloat=vf;function kf(e){return e.match(/^[+-]?[0-9]+\.[0-9]+([eE][+-]?[0-9]+)?$/)||e.match(/^[+-]?[0-9]+\.?([eE][+-]?[0-9]+)?$/)||e.match(/^[+-]?\.[0-9]+([eE][+-]?[0-9]+)?$/)}});var Fa=p(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.parseChunk=void 0;var Vt=U(),Cf=vr(),Oa=de();function Ef(e,n,t){(0,Vt.assertChunkSinglular)(e,t),(0,Vt.assertChunkPrecedes)(e,t,"IDAT"),(0,Vt.assertChunkDataLengthGte)(e,t,4);let r=t.offset+4+4,a=r+t.dataLength,i=r,o=new TextDecoder("latin1"),s;s=(0,Oa.readText)(e,t,o,79,i,a,!0),i+=s.bytesRead;let u=s.text,l=e.view.getInt32(i);i+=4;let f=e.view.getInt32(i);i+=4;let c=e.view.getUint8(i++),d;switch(c){case 0:d="linear-mapping";break;case 1:d="base-e exponential mapping";break;case 2:d="arbitrary-base exponential mapping";break;case 3:d="hyperbolic mapping";break;default:throw(0,Vt.createChunkDecodeWarning)(t,`Invalid equation type "${c}"`,i)}let h=e.view.getUint8(i++);s=(0,Oa.readText)(e,t,o,79,i,a,!0),i+=s.bytesRead;let _=s.text,E=[],v;for(let g=0;g<h;g++)v=(0,Cf.readFloat)(e,t,o,i,a,g<h-1),i+=v.bytesRead,E.push(v.value);return{type:"pCAL",calibrationName:u,x0:l,x1:f,equationType:d,unitName:_,params:E}}Kt.parseChunk=Ef});var Ba=p(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.parseChunk=void 0;var kr=U();function xf(e,n,t){(0,kr.assertChunkSinglular)(e,t),(0,kr.assertChunkPrecedes)(e,t,"IDAT"),(0,kr.assertChunkDataLengthEquals)(e,t,9);let r=t.offset+4+4,a=e.view.getUint32(r);r+=4;let i=e.view.getUint32(r);r+=4;let o=e.view.getUint8(r)===1?"meter":"unknown";return{type:"pHYs",pixelsPerUnit:{x:a,y:i},unitType:o}}Jt.parseChunk=xf});var Na=p(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.parseChunk=void 0;var it=U();function mf(e,n,t){(0,it.assertChunkSinglular)(e,t),(0,it.assertChunkPrecedes)(e,t,"PLTE"),(0,it.assertChunkPrecedes)(e,t,"IDAT");let r=t.offset+4+4,a,i;switch(n.colorType){case 0:{a=e.view.getUint8(r),i=1;break}case 2:case 3:{a=[e.view.getUint8(r),e.view.getUint8(r+1),e.view.getUint8(r+2)],i=3;break}case 4:{a=[e.view.getUint8(r),e.view.getUint8(r+1)],i=2;break}case 6:{a=[e.view.getUint8(r),e.view.getUint8(r+1),e.view.getUint8(r+2),e.view.getUint8(r+3)],i=4;break}default:throw(0,it.createChunkDecodeWarning)(t,`Unrecognized color type "${n.colorType}"`,r)}return(0,it.assertChunkDataLengthEquals)(e,t,i),{type:"sBIT",value:a}}Qt.parseChunk=mf});var ja=p(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.parseChunk=void 0;var at=U(),qa=vr();function Tf(e,n,t){(0,at.assertChunkSinglular)(e,t),(0,at.assertChunkPrecedes)(e,t,"IDAT"),(0,at.assertChunkDataLengthGte)(e,t,4);let r=t.offset+4+4,a=r+t.dataLength,i=r,o=new TextDecoder("latin1"),s=e.view.getUint8(i),u;switch(s){case 0:u="meter";break;case 1:u="radian";break;default:throw(0,at.createChunkDecodeWarning)(t,`Invalid sCAL unit type ("${s}")`,i)}i++;let l;l=(0,qa.readFloat)(e,t,o,i,a,!0),i+=l.bytesRead;let f=l.value;l=(0,qa.readFloat)(e,t,o,i,a,!1),i+=l.bytesRead;let c=l.value;if(f<0||c<0)throw(0,at.createChunkDecodeWarning)(t,`Values cannot be negative (${f}, ${c})`,i);return{type:"sCAL",pixelsPerUnit:{x:f,y:c},unitType:u}}en.parseChunk=Tf});var $a=p(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.parseChunk=void 0;var Za=U(),Df=de();function Af(e,n,t){(0,Za.assertChunkPrecedes)(e,t,"IDAT");let r=t.offset+4+4,a=r,i=a+t.dataLength,o=new TextDecoder("latin1"),s=(0,Df.readText)(e,t,o,void 0,a,i,!0);a+=s.bytesRead;let u=s.text,l=e.view.getUint8(a++),f=l===16?2:1,c=f*4+2,d=t.dataLength-(a-r),h=d/c;if(h%1!==0)throw(0,Za.createChunkDecodeWarning)(t,`Invalid data length: ${d} should be divisible by entry size ${c}`,a);let _=[];for(let E=0;E<h;E++){let v=[];for(let C=0;C<4;C++)v.push(f===2?e.view.getUint16(a):e.view.getUint8(a)),a+=f;let g=e.view.getUint16(a);a+=2,_.push({red:v[0],green:v[1],blue:v[2],alpha:v[3],frequency:g})}return{type:"sPLT",name:u,sampleDepth:l,entries:_}}tn.parseChunk=Af});var Ha=p(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.parseChunk=void 0;var Fe=U();function Sf(e,n,t){(0,Fe.assertChunkSinglular)(e,t),(0,Fe.assertChunkMutualExclusion)(e,t,"iCCP"),(0,Fe.assertChunkPrecedes)(e,t,"PLTE"),(0,Fe.assertChunkPrecedes)(e,t,"IDAT"),(0,Fe.assertChunkDataLengthEquals)(e,t,1);let r=t.offset+4+4,a=e.view.getUint8(r),i;switch(a){case 0:case 1:case 2:case 3:i=a;break;default:throw(0,Fe.createChunkDecodeWarning)(t,`Invalid rendering intent "${a}"`,r)}return{type:"sRGB",renderingIntent:i}}nn.parseChunk=Sf});var Wa=p(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.parseChunk=void 0;var ot=U();function Uf(e,n,t){(0,ot.assertChunkSinglular)(e,t),(0,ot.assertChunkPrecedes)(e,t,"IDAT"),(0,ot.assertChunkDataLengthEquals)(e,t,1);let r=t.offset+4+4,a=e.view.getUint8(r),i;switch(a){case 0:i="cross-fuse";break;case 1:i="diverging-fuse";break;default:throw(0,ot.createChunkDecodeWarning)(t,`Invalid layout mode "${a}"`,r)}let o=15-(n.width-1)%16;if(o>7)throw(0,ot.createChunkDecodeWarning)(t,`Invalid padding value "${o}" for image width ${n.width}`,r);let s=Math.floor((n.width-o)/2);return{type:"sTER",layoutMode:i,subimageWidth:s,padding:o}}rn.parseChunk=Uf});var Ya=p(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.parseChunk=void 0;var Pf=U(),Ga=de();function Mf(e,n,t){(0,Pf.assertChunkDataLengthGte)(e,t,6);let r=t.offset+4+4,a=r+t.dataLength,i=r,o=new TextDecoder("latin1"),s;s=(0,Ga.readText)(e,t,o,79,i,a,!0),i+=s.bytesRead;let u=s.text;s=(0,Ga.readText)(e,t,o,void 0,i,a,!1),i+=s.bytesRead;let l=s.text;return{type:"tEXt",keyword:u,text:l}}an.parseChunk=Mf});var Xa=p(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.parseChunk=void 0;var Be=U();function Lf(e,n,t){switch((0,Be.assertChunkPrecedes)(e,t,"IDAT"),n.colorType){case 0:(0,Be.assertChunkDataLengthEquals)(e,t,2);break;case 2:(0,Be.assertChunkDataLengthEquals)(e,t,6);break;case 3:if((0,Be.assertChunkFollows)(e,t,"PLTE"),t.dataLength>e.palette.size)throw(0,Be.createChunkDecodeWarning)(t,`Invalid data length for color type ${n.colorType}: ${t.dataLength} > ${e.palette.size}`,t.offset+4+4);break;case 4:case 6:throw(0,Be.createChunkDecodeWarning)(t,`Chunk invalid when color type has alpha (${n.colorType})`,t.offset+4+4)}let r=t.offset+4+4,a;switch(n.colorType){case 0:a=e.view.getUint16(r);break;case 2:a=[e.view.getUint16(r),e.view.getUint16(r+2),e.view.getUint16(r+4)];break;case 3:a=[];for(let i=0;i<t.dataLength;i++)a.push(e.view.getUint8(r+i));break}return{type:"tRNS",transparency:a}}on.parseChunk=Lf});var Ja=p(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.parseChunk=void 0;var Va=U(),Ka=de();function If(e,n,t){(0,Va.assertChunkDataLengthGte)(e,t,6);let r=t.offset+4+4,a=r+t.dataLength,i=r,o=new TextDecoder("latin1"),s;s=(0,Ka.readText)(e,t,o,79,i,a,!0),i+=s.bytesRead;let u=s.text,l=e.view.getUint8(i);(0,Va.assertChunkCompressionMethod)(e,t,l,i),i++,s=(0,Ka.readText)(e,t,o,void 0,i,a,!1,!0),i+=s.bytesRead;let f=s.text;return{type:"zTXt",keyword:u,text:f}}sn.parseChunk=If});var Qa=p(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.Palette=Ne.parseChunk=void 0;var Z=U();function Rf(e,n,t){(0,Z.assertChunkSinglular)(e,t),(0,Z.assertChunkPrecedes)(e,t,"bKGD"),(0,Z.assertChunkPrecedes)(e,t,"hIST"),(0,Z.assertChunkPrecedes)(e,t,"tRNS"),(0,Z.assertChunkPrecedes)(e,t,"IDAT");let r=t.offset+4;if(n.colorType===0||n.colorType===4)throw(0,Z.createChunkDecodeWarning)(t,`Color type "${n.colorType}" cannot have a palette`,r);if(r+=4,t.dataLength===0)throw(0,Z.createChunkDecodeWarning)(t,"Cannot have 0 entries",r);if(t.dataLength%3!==0)throw(0,Z.createChunkDecodeWarning)(t,`Chunk length must be divisible by 3 (actual "${t.dataLength}")`,r);return t.dataLength/3>256&&(0,Z.handleWarning)(e,(0,Z.createChunkDecodeWarning)(t,`Too many entries (${t.dataLength/3} > 256)`,r)),t.dataLength/3>Math.pow(2,n.bitDepth)&&(0,Z.handleWarning)(e,(0,Z.createChunkDecodeWarning)(t,`Too many entries for bit depth (${t.dataLength/3} > 2^${n.bitDepth})`,r)),new ln(e.view,t.offset+4+4,t.dataLength)}Ne.parseChunk=Rf;var ln=class{constructor(n,t,r){this._view=n,this._paletteOffset=t,this._length=r}get size(){return this._length/3}getRgb(n){return this._checkIndex(n),new Uint8Array(this._view.buffer.slice(this._view.byteOffset+this._paletteOffset+n*3,this._view.byteOffset+this._paletteOffset+n*3+3))}setRgba(n,t,r){this._checkIndex(r);let a=this._paletteOffset+r*3;n[t]=this._view.getUint8(a),n[t+1]=this._view.getUint8(a+1),n[t+2]=this._view.getUint8(a+2),n[t+3]=255}_checkIndex(n){if(n<0||n*3>this._length-3)throw new Error(`Palette does not contain color index "${n}"`)}};Ne.Palette=ln});var oo=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.readChunk=Q.readChunks=Q.decodePng=Q.verifyPngSignature=void 0;var zf=zr(),I=U(),Of=ya(),Ff=ka(),Bf=Ea(),Nf=br();function ro(e){if(e.view.byteLength<7)throw new I.DecodeError(e,`Not enough bytes in file for png signature (${e.view.byteLength})`,0);if(!(e.view.getUint8(0)===137&&e.view.getUint8(1)===80&&e.view.getUint8(2)===78&&e.view.getUint8(3)===71&&e.view.getUint8(4)===13&&e.view.getUint8(5)===10&&e.view.getUint8(6)===26&&e.view.getUint8(7)===10)){let t=eo(Array.from(new Uint8Array(e.view.buffer).slice(e.view.byteOffset,e.view.byteOffset+8))),r=eo([137,80,78,71,13,10,26,10]);throw new I.DecodeError(e,`Png signature is not correct (${t} !== ${r})`,0)}}Q.verifyPngSignature=ro;function eo(e){return`0x${e.map(n=>n.toString(16).padStart(2,"0")).join("")}`}var to=Object.freeze(["tRNS"]),no=Object.freeze(["bKGD","cHRM","eXIf","gAMA","hIST","iCCP","iTXt","tIME","oFFs","pCAL","pHYs","sBIT","sCAL","sPLT","sRGB","sTER","tEXt","tRNS","zTXt"]);function qf(e){switch(e){case"bKGD":return Promise.resolve().then(()=>ma());case"cHRM":return Promise.resolve().then(()=>Ta());case"eXIf":return Promise.resolve().then(()=>Da());case"gAMA":return Promise.resolve().then(()=>Aa());case"hIST":return Promise.resolve().then(()=>Sa());case"iCCP":return Promise.resolve().then(()=>Ua());case"iTXt":return Promise.resolve().then(()=>Ma());case"tIME":return Promise.resolve().then(()=>Ia());case"oFFs":return Promise.resolve().then(()=>Ra());case"pCAL":return Promise.resolve().then(()=>Fa());case"pHYs":return Promise.resolve().then(()=>Ba());case"sBIT":return Promise.resolve().then(()=>Na());case"sCAL":return Promise.resolve().then(()=>ja());case"sPLT":return Promise.resolve().then(()=>$a());case"sRGB":return Promise.resolve().then(()=>Ha());case"sTER":return Promise.resolve().then(()=>Wa());case"tEXt":return Promise.resolve().then(()=>Ya());case"tRNS":return Promise.resolve().then(()=>Xa());case"zTXt":return Promise.resolve().then(()=>Ja());default:throw new Error(`Could not get decoder for chunk type "${e}"`)}}async function jf(e,n={}){let t={view:new DataView(e.buffer,e.byteOffset,e.byteLength),image:void 0,palette:void 0,metadata:[],parsedChunks:new Set,warnings:[],info:[],options:n};ro(t);let r=io(t);t.rawChunks=r;let a=(0,Bf.parseChunk)(t,r[0]),i={...t,header:a},o;n&&n.parseChunkTypes?n.parseChunkTypes==="*"?o=no:o=to.concat(n.parseChunkTypes):o=to;for(let s=1;s<r.length;s++){let u=r[s];switch(u.type){case"IHDR":(0,I.handleWarning)(i,(0,I.createChunkDecodeWarning)(u,"Multiple IHDR chunks not allowed",u.offset+4));break;case"IDAT":{let l=[u];for(;r.length>s+1&&r[s+1].type==="IDAT";)l.push(r[++s]);i.image={width:a.width,height:a.height,data:(0,Of.parseChunk)(i,a,l)};break}case"PLTE":i.palette=(await Promise.resolve().then(()=>Qa())).parseChunk(i,a,u);break;case"IEND":(0,Ff.parseChunk)(i,a,u);break;default:if(o.includes(u.type))try{i.metadata.push((await qf(u.type)).parseChunk(i,a,u))}catch(l){if(l instanceof I.DecodeWarning)(0,I.handleWarning)(i,l);else throw l}else if(!no.includes(u.type))if(u.isAncillary)i.info.push(`Unrecognized chunk type "${u.type}"`);else throw new I.DecodeError(i,`Unrecognized critical chunk type "${u.type}"`,u.offset+4);break}i.parsedChunks.add(u.type)}if(!i.image)throw new I.DecodeError(i,"Failed to decode, no IDAT chunk",0);return n&&n.force32&&i.image.data.BYTES_PER_ELEMENT===2&&(i.image.data=(0,zf.convert16BitTo8BitData)(i.image.data)),{image:i.image,details:{width:a.width,height:a.height,bitDepth:a.bitDepth,colorType:a.colorType,interlaceMethod:a.interlaceMethod},palette:i.palette,metadata:i.metadata,rawChunks:r,warnings:i.warnings,info:i.info}}Q.decodePng=jf;function io(e){let n=[],t=8,r=!1,a=!1,i;for(;t<e.view.byteLength;){try{i=ao(e,t)}catch(o){if(!a||!(o instanceof Error))throw o;(0,I.handleWarning)(e,new I.DecodeWarning("Could not parse chunk after IEND: "+o.message,t))}t+=4+4+i.dataLength+4,n.push(i),r||(r=i.type==="IDAT"),a||(a=i.type==="IEND")}if(n[0].type!=="IHDR")throw new I.DecodeError(e,"First chunk is not IHDR",n[0].offset+4);if(n[n.length-1].type!=="IEND"&&(0,I.handleWarning)(e,new I.DecodeWarning("Last chunk is not IEND",n[n.length-1].offset+4)),!r)throw new I.DecodeError(e,"No IDAT chunk",0);return n}Q.readChunks=io;function ao(e,n){if(e.view.byteLength<n+4)throw new I.DecodeError(e,"EOF while reading chunk length",n);let t=e.view.getUint32(n);if(e.view.byteLength<n+4+4)throw new I.DecodeError(e,"EOF while reading chunk type",n);let r=String.fromCharCode(e.view.getUint8(n+4),e.view.getUint8(n+5),e.view.getUint8(n+6),e.view.getUint8(n+7));if(e.view.byteLength<n+4+4+t+4)throw new I.DecodeError(e,`EOF while reading chunk "${r}"`,n);let a=e.view.getUint32(n+4+4+t)>>>0,i=(0,Nf.crc32)(e.view,n+4,4+t);return a!==i&&(0,I.handleWarning)(e,new I.DecodeWarning(`CRC for chunk "${r}" at offset 0x${n.toString(16)} doesn't match (0x${a.toString(16)} !== 0x${i.toString(16)})`,n)),{offset:n,type:r,dataLength:t,isAncillary:Cr(r,0),isPrivate:Cr(r,1),isSafeToCopy:Cr(r,3)}}Q.readChunk=ao;function Cr(e,n){return!!(e.charCodeAt(n)&32)}});var un=p(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.ByteStream=void 0;var Er=class{constructor(n){this.offset=0,this.array=new Uint8Array(n),this.view=new DataView(this.array.buffer,this.array.byteOffset,this.array.byteLength)}writeUint8(n){this.view.setUint8(this.offset,n),this.offset+=1}writeUint16(n){this.view.setUint16(this.offset,n),this.offset+=2}writeUint32(n){this.view.setUint32(this.offset,n),this.offset+=4}writeArray(n){this.array.set(n,this.array.byteOffset+this.offset),this.offset+=n.length}assertAtEnd(){if(this.offset!==this.array.length)throw new Error("Writing finished before expected length of stream")}};fn.ByteStream=Er});var Ce=p(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.writeChunkDataFn=_e.writeChunk=_e.writeChunkType=void 0;var so=un(),lo=br();function xr(e,n){e.writeUint8(n.charCodeAt(0)),e.writeUint8(n.charCodeAt(1)),e.writeUint8(n.charCodeAt(2)),e.writeUint8(n.charCodeAt(3))}_e.writeChunkType=xr;function Zf(e,n){let t=new so.ByteStream(8+n.length+4);if(t.writeUint32(n.length),e.length!==4)throw new Error(`Cannot encode a chunk type of length ${e.length}`);return xr(t,e),t.writeArray(n),t.writeUint32((0,lo.crc32)(t.view,4,4+n.length)),t.assertAtEnd(),t.array}_e.writeChunk=Zf;function $f(e,n,t){let r=new so.ByteStream(8+n+4);if(r.writeUint32(n),e.length!==4)throw new Error(`Cannot encode a chunk type of length ${e.length}`);return xr(r,e),t(r),r.writeUint32((0,lo.crc32)(r.view,4,4+n)),r.assertAtEnd(),r.array}_e.writeChunkDataFn=$f});var uo=p(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.encodeChunk=void 0;var Hf=Dt(),Wf=un(),Gf=pr(),Yf=Ce();function Xf(e,n){let t=Vf(e,n),r=new Wf.ByteStream(t);Kf(e,n,r);let a=Hf.deflate(r.array);return(0,Yf.writeChunk)("IDAT",a)}cn.encodeChunk=Xf;function Vf(e,n){if(e.bitDepth<8)throw new Error("Only bit depth 8 and 16 is supported currently");if(n.data.BYTES_PER_ELEMENT===2&&e.bitDepth===8)throw new Error("16 to 8 bit conversion isn't supported yet");if(e.interlaceMethod!==0)throw new Error("Only interlace method 0 is supported currently");let t;switch(e.colorType){case 0:t=1;break;case 2:t=3;break;case 3:t=1;break;case 4:t=2;break;case 6:t=4;break}let r=e.bitDepth===16?2:1;return(1+t*r*n.width)*n.height}function Kf(e,n,t){let r=0,a=0,i=0;if(e.colorType===3){if(!e.palette)throw new Error("Cannot encode indexed file without palette");if(n.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode indexed file from 16-bit image");for(;i<n.height;i++)for(t.writeUint8(0),a=0;a<n.width;a++)t.writeUint8(e.palette.get(n.data[r]<<24|n.data[r+1]<<16|n.data[r+2]<<8|n.data[r+3])),r+=4;return}let o;if(e.options.filterPattern){if(e.options.filterPattern.length===0)throw new Error("Filter pattern with 0 entries");o=e.options.filterPattern}let s=4*n.data.BYTES_PER_ELEMENT,u=[];for(let f of[0,1,2,3,4])u[f]=Qf(s,s*n.width,f);let l=fo(e.colorType);for(;i<n.height;i++){let f=o?o[i%o.length]:Jf(e.colorType,n,i*n.width*4,u),c=new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength);t.writeUint8(f);let d=0,h=0;for(a=0;a<n.width;a++){for(h of l)for(d=n.data.BYTES_PER_ELEMENT-1;d>=0;d--)t.writeUint8(u[f](c,(r+h)*n.data.BYTES_PER_ELEMENT+d,a===0));r+=4}}}function Jf(e,n,t,r){let a=[],i=4*n.data.BYTES_PER_ELEMENT;for(let u of[0,1,2,3,4]){let l=0,f=fo(e),c=new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength),d=0,h=0;for(let _=t;_<t+n.width*4;_+=4)for(d of f)for(h=n.data.BYTES_PER_ELEMENT-1;h>=0;h--)l+=r[u](c,(_+d)*n.data.BYTES_PER_ELEMENT+h,_===t);a[u]=l}let o=0,s=a[0];for(let u of[1,2,3,4])a[u]<s&&(o=u,s=a[u]);return o}function Qf(e,n,t){let r=0,a=0,i=0;switch(t){case 0:return(o,s)=>o[s];case 1:return(o,s,u)=>(r=u?-1:s-e,(o[s]-(r<0?0:o[s-e])+256)%256);case 2:return(o,s)=>(a=s-n,(o[s]-(a<0?0:o[a])+256)%256);case 3:return(o,s,u)=>(r=u?-1:s-e,a=s-n,(o[s]-Math.floor(((r<0?0:o[r])+(a<0?0:o[a]))/2)+256)%256);case 4:return(o,s,u)=>(r=u?-1:s-e,a=s-n,i=u?-1:s-e-n,(o[s]-(0,Gf.paethPredicator)(r<0?0:o[r],a<0?0:o[a],i<0?0:o[i])+256)%256)}}function fo(e){switch(e){case 0:return[0];case 2:return[0,1,2];case 4:return[0,3];case 6:return[0,1,2,3]}}});var co=p(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.encodeChunk=void 0;var eu=Ce();function tu(){return(0,eu.writeChunk)("IEND",new Uint8Array(0))}hn.encodeChunk=tu});var ho=p(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.encodeChunk=void 0;var nu=Ce();function ru(e,n){if(n.width<=0||n.height<=0)throw new Error(`Invalid dimensions ${n.width}x${n.height}`);return(0,nu.writeChunkDataFn)("IHDR",13,t=>{t.writeUint32(n.width),t.writeUint32(n.height),t.writeUint8(e.bitDepth),t.writeUint8(e.colorType),t.writeUint8(0),t.writeUint8(0),t.writeUint8(e.interlaceMethod)})}dn.encodeChunk=ru});var _o=p(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.encodeChunk=void 0;var mr=Ce();function iu(e,n){switch(e.colorType){case 0:{if(e.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for grayscale without any transparent colors");let t=e.firstTransparentColor;return(0,mr.writeChunkDataFn)("tRNS",2,r=>{n.data.BYTES_PER_ELEMENT===2?r.writeUint16(t>>48&65535):r.writeUint16(t>>24&255)})}case 3:{if(!e.palette)throw new Error("Cannot encode tRNS chunk for indexed image without palette");return(0,mr.writeChunkDataFn)("tRNS",e.palette.size,t=>{for(let r of e.colorSet)t.writeUint8(r&255)})}case 2:{if(e.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for True color without any transparent colors");let t=e.firstTransparentColor;return(0,mr.writeChunkDataFn)("tRNS",6,r=>{n.data.BYTES_PER_ELEMENT===2?(r.writeUint16(t>>48&65535),r.writeUint16(t>>32&65535),r.writeUint16(t>>16&65535)):(r.writeUint16(t>>24&255),r.writeUint16(t>>16&255),r.writeUint16(t>>8&255))})}default:throw new Error(`Cannot encode tRNS chunk for color type "${e.colorType}"`)}}_n.encodeChunk=iu});var wo=p(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.encodeChunk=void 0;var au=Ce();function ou(e,n){if(e.bitDepth===16||n.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode 16 bit images using indexed color type");if(e.colorSet.size>Math.pow(2,e.bitDepth))throw new Error(`Too many colors ${e.colorSet.size} to encode into indexed image (2^${e.bitDepth} = ${Math.pow(2,e.bitDepth)})`);let t=(0,au.writeChunkDataFn)("PLTE",e.colorSet.size*3,a=>{for(let i of e.colorSet.values())a.writeUint8(i>>24&255),a.writeUint8(i>>16&255),a.writeUint8(i>>8&255)}),r=new Map;for(let a of e.colorSet.values())r.set(a,r.size);return{chunkData:t,palette:r}}wn.encodeChunk=ou});var Tr=p(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.encodeChunk=void 0;var su=dt(),lu=Ce();function fu(e,n,t,r){if(t.length===0||t.length>79)throw new su.EncodeError(`tEXt: Invalid keyword length: 0 < ${t.length} < 80`,0);let a=t.length+1+r.length;return(0,lu.writeChunkDataFn)("tEXt",a,i=>{let o=0;for(;o<t.length;o++)i.writeUint8(t.charCodeAt(o));for(i.writeUint8(0),o=0;o<r.length;o++)i.writeUint8(r.charCodeAt(o))})}pn.encodeChunk=fu});var po=p(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.encodePng=void 0;var uu=un(),cu=uo(),hu=co(),du=ho(),Dr=dt();function _u(e){switch(e){case"tRNS":return Promise.resolve().then(()=>_o());default:throw new Error(`Could not get encoder for chunk type "${e}"`)}}async function wu(e,n={}){if(e.data.length!==e.width*e.height*4)throw new Dr.EncodeError(`Provided image data length (${e.data.length}) is not expected length (${e.width*e.height*4})`,Math.min(e.data.length,e.width*e.height*4)-1);let t=[];t.push(pu());let r=gu(e,n);if(t.push((0,du.encodeChunk)(r,e)),r.colorType===3){let s=(await Promise.resolve().then(()=>wo())).encodeChunk(r,e);r.palette=s.palette,t.push(s.chunkData)}if(r.useTransparencyChunk&&t.push((await _u("tRNS")).encodeChunk(r,e)),t.push((0,cu.encodeChunk)(r,e)),n?.ancillaryChunks===void 0)t.push((await Promise.resolve().then(()=>Tr())).encodeChunk(r,e,"Software","@lunapaint/png-codec"));else for(let s of n.ancillaryChunks)switch(s.type){case"tEXt":t.push((await Promise.resolve().then(()=>Tr())).encodeChunk(r,e,s.keyword,s.text));break;default:throw new Error(`Cannot encode chunk type "${s.type}"`)}t.push((0,hu.encodeChunk)());let a=t.reduce((s,u)=>s+u.length,0),i=new Uint8Array(a),o=0;for(let s of t)i.set(s,o),o+=s.length;return{data:i,warnings:r.warnings,info:r.info}}gn.encodePng=wu;function pu(){let e=new uu.ByteStream(8);return e.writeUint8(137),e.writeUint8(80),e.writeUint8(78),e.writeUint8(71),e.writeUint8(13),e.writeUint8(10),e.writeUint8(26),e.writeUint8(10),e.assertAtEnd(),e.array}function gu(e,n={}){let t=[],r=[],i=e.width*e.height*4,o=new Set,s=new Set,u=0;if(e.data.BYTES_PER_ELEMENT===2)for(let c=0;c<i;c+=4)u=e.data[c]<<48|e.data[c+1]<<32|e.data[c+2]<<16|e.data[c+3],e.data[c+3]<65535&&s.add(u),o.add(u);else for(let c=0;c<i;c+=4)u=e.data[c]<<24|e.data[c+1]<<16|e.data[c+2]<<8|e.data[c+3],e.data[c+3]<255&&s.add(u),o.add(u);let l=n.colorType;l===void 0&&(o.size>256||e.data.BYTES_PER_ELEMENT===2?l=2:l=3);let f;switch(l){case 0:case 2:f=s.size===1,!f&&s.size>1&&(l=l===2?6:4,n.colorType===2&&(0,Dr.handleWarning)({options:n,warnings:t},new Dr.EncodeWarning(`Cannot encode image as color type Truecolor as it contains ${s.size} transparent colors`,0)));break;case 3:f=s.size>0;break;default:f=!1}return n.colorType===void 0&&r.push(`Using color type ${l}`),{colorType:l,bitDepth:e.data.BYTES_PER_ELEMENT===2?16:8,interlaceMethod:0,colorSet:o,transparentColorCount:s.size,firstTransparentColor:s.size>0?s.values().next().value:void 0,useTransparencyChunk:f,options:n,warnings:t,info:r}}});var yo=p(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.encodePng=F.decodePng=F.EncodeWarning=F.EncodeError=F.DecodeWarning=F.DecodeError=void 0;var go=U();Object.defineProperty(F,"DecodeError",{enumerable:!0,get:function(){return go.DecodeError}});Object.defineProperty(F,"DecodeWarning",{enumerable:!0,get:function(){return go.DecodeWarning}});var bo=dt();Object.defineProperty(F,"EncodeError",{enumerable:!0,get:function(){return bo.EncodeError}});Object.defineProperty(F,"EncodeWarning",{enumerable:!0,get:function(){return bo.EncodeWarning}});async function bu(e,n){return(await Promise.resolve().then(()=>oo())).decodePng(e,n)}F.decodePng=bu;async function yu(e,n){return(await Promise.resolve().then(()=>po())).encodePng(e,n)}F.encodePng=yu});var Ir={};Uo(Ir,{arrayBufferToValue:()=>lt,blobToImageElement:()=>Ar,compress:()=>kn,decode:()=>Au,decodeBinary:()=>xn,decodeBinaryFromFile:()=>Eo,decodeBinaryFromPng:()=>Lr,decodeDataFromImage:()=>Pr,decodeFromFile:()=>Uu,decompress:()=>mu,decompressAsArrayBuffer:()=>Cn,decompressAsString:()=>xu,defaultCompressionFormat:()=>st,downloadImage:()=>Su,encode:()=>Tu,encodeBinary:()=>Co,encodeBinaryToBlob:()=>Mr,encodeBinaryToPng:()=>yn,encodeDataIntoImage:()=>Ur,encodeToBlob:()=>ko,encodeToImage:()=>Du,getBufferfromFile:()=>xo,getImageData:()=>ku,imageElementToBlob:()=>vu,imageElementToCanvas:()=>Sr,valueToArrayBuffer:()=>En});var bn=Mo(yo(),1);async function vu(e){let{canvas:n}=Sr(e);return new Promise((t,r)=>{n.toBlob(function(a){a?t(a):r(new Error(""))},"image/png")})}async function Ar(e,n=document.createElement("img")){return new Promise((t,r)=>{let a=()=>{URL.revokeObjectURL(n.src),n.removeEventListener("load",a),n.removeEventListener("error",r),t(n)};n.addEventListener("load",a),n.addEventListener("error",r),n.src=URL.createObjectURL(e)})}function ku(e){let{context:n,width:t,height:r}=Sr(e);return n.getImageData(0,0,t,r).data}function Sr(e){let n=document.createElement("canvas"),t=n.getContext("2d"),r=n.width=e.naturalWidth,a=n.height=e.naturalHeight;return t?.drawImage(e,0,0),{canvas:n,context:t,width:r,height:a}}function Ur(e,n){let t=e.length;for(let r=0;r<3;r++)n[r]=t/Math.pow(256,r)%256|0;n[3]=255;for(let r=4,a=0,i=n.length;r<i;r+=4,a+=3)n[r]=e[a]||0,n[r+1]=e[a+1]||0,n[r+2]=e[a+2]||0,n[r+3]=255;return n}function Pr(e){let n=0;for(let r=0;r<3;r++){let a=e[r]*Math.pow(256,r);n+=a}let t=new Uint8Array(n);e:for(let r=4,a=0,i=e.length;a<i;r+=4,a+=3)for(let o=0;o<3;o++){if(a+o>=n)break e;t[a+o]=e[r+o]}return t.buffer}async function yn(e){let n=new Uint8Array(e),t=Math.ceil(Math.sqrt(n.length/3+1)),r=new ImageData(t,t);return Ur(n,r.data),(await(0,bn.encodePng)({width:t,height:t,data:new Uint8Array(r.data.buffer)})).data.buffer}async function Mr(e){let n=await yn(e);return new Blob([n],{type:"image/png"})}async function Lr(e){if(!(e instanceof ArrayBuffer))throw new Error("Expected ArrayBuffer but got "+typeof e);let n=await(0,bn.decodePng)(new Uint8Array(e));return Pr(new Uint8ClampedArray(n.image.data.buffer))}var{CompressionStream:Cu,DecompressionStream:Eu,Response:vn}=globalThis,st="gzip";async function kn(e,n=st){let t=new Cu(n),r=new vn(e).body?.pipeThrough(t);return await new vn(r).arrayBuffer()}async function vo(e,n=st){let t=new Eu(n),r=new vn(e).body?.pipeThrough(t);return new vn(r)}async function Cn(e,n=st){return(await vo(e,n)).arrayBuffer()}async function xu(e,n=st){return(await vo(e,n)).text()}var mu=Cn;function En(e){return new TextEncoder().encode(JSON.stringify(e)).buffer}function lt(e){return JSON.parse(new TextDecoder().decode(e))}async function Tu(e){return await Co(En(e))}async function ko(e){return await Mr(await kn(En(e)))}async function Du(e,n){return Ar(await ko(e),n)}async function Co(e){return await yn(await kn(e))}async function Au(e){return lt(await xn(e))}async function xn(e){return await Cn(await Lr(e))}function Su(e,n="compressed.png"){let t=URL.createObjectURL(e),r=document.createElement("a");r.download=n,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}async function Eo(e){let n=await xo(e);return await xn(n)}async function Uu(e){return lt(await Eo(e))}async function xo(e){return new Promise((n,t)=>{let r=new FileReader;r.addEventListener("load",()=>{n(r.result)}),r.addEventListener("error",t),r.readAsArrayBuffer(e)})}window.PNGCompressor=Ir;})();
//# sourceMappingURL=png-compressor.js.map
